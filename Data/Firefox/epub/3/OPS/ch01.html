<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.1//EN' 'http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd'>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Programming Arduino™ Next Steps: Going Further with Sketches</title>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"></meta>
<link href="stylesheet.css" type="text/css" rel="stylesheet"></link>

<!-- kobo-style -->
<link type="text/css" rel="stylesheet" href="css/kobo.css"></link>
<script type="text/javascript" src="js/kobo.js"></script>
<style type="text/css" id="kobostylehacks">div#book-inner p, div#book-inner div { font-size: 1.0em; } a { color: black; } a:link, a:visited, a:hover, a:active { color: blue; } div#book-inner * { margin-top: 0 !important; margin-bottom: 0 !important;}</style>
</head>
<body><div id="book-columns"><div id="book-inner">
<div class="chapnum" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.1.1">1</span></span></div>
<div class="chaptitle" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.2.1">Programming Arduino</span></span></div>
<div class="noindent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="big"><span class="koboSpan" id="kobo.3.1">This chapter</span></span><span class="koboSpan" id="kobo.4.1"> summarizes the basics of Arduino. </span><span class="koboSpan" id="kobo.4.2">If you are completely new to Arduino, then you might find it useful to also read </span><i><span class="koboSpan" id="kobo.5.1">Programming Arduino: Getting Started with Sketches</span></i><span class="koboSpan" id="kobo.6.1"> (McGraw-Hill Professional, 2012).</span></span></div>
<div class="image2" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.7.1"><img width="100%" alt="image" src="images/line2.jpg" xmlns="http://www.w3.org/1999/xhtml"></img></span></span></div>
<div id="c1-1" class="head" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.8.1">What Is Arduino?</span></span></div>
<div class="noindent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.9.1">The term </span><i><span class="koboSpan" id="kobo.10.1">Arduino</span></i><span class="koboSpan" id="kobo.11.1"> is used to describe both the physical Arduino board (of which the most popular type is the Arduino Uno) and the Arduino system as a whole. </span><span class="koboSpan" id="kobo.11.2">The system also includes the software you need to run on your computer (to program the board) and the peripheral shields that you can plug into an Arduino board.</span></span></div>
<div class="indent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.12.1">To use an Arduino, you also need a “proper” computer. </span><span class="koboSpan" id="kobo.12.2">This can be a Mac, Windows PC, Linux PC, or even something as humble as a Raspberry Pi. </span><span class="koboSpan" id="kobo.12.3">The main reason that you need the computer is so you can download programs onto the Arduino board. </span><span class="koboSpan" id="kobo.12.4">Once installed on the Arduino, these programs can then run independently.</span></span></div>
<div class="indent" xmlns="http://www.w3.org/1999/xhtml"><span><a href="#fig1-1"><span class="koboSpan" id="kobo.13.1">Figure 1-1</span></a><span class="koboSpan" id="kobo.14.1"> shows an Arduino Uno.</span></span></div>
<div class="break" xmlns="http://www.w3.org/1999/xhtml">
<div id="fig1-1" class="image"><span><span class="koboSpan" id="kobo.15.1"><img alt="image" src="images/fig1-1.jpg" xmlns="http://www.w3.org/1999/xhtml"></img></span></span></div>
<div class="caption"><span><b><span class="koboSpan" id="kobo.16.1">Figure 1-1</span></b><span class="koboSpan" id="kobo.17.1">   </span><i><span class="koboSpan" id="kobo.18.1">An Arduino Uno</span></i></span></div>
</div>
<div class="indent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.19.1">The Arduino can also communicate with your computer over USB. </span><span class="koboSpan" id="kobo.19.2">While the computer is connected, you can send messages in both directions. </span><a href="#fig1-2"><span class="koboSpan" id="kobo.20.1">Figure 1-2</span></a><span class="koboSpan" id="kobo.21.1"> shows the relationship between the Arduino and your computer.</span></span></div>
<div class="break" xmlns="http://www.w3.org/1999/xhtml">
<div id="fig1-2" class="image"><span><span class="koboSpan" id="kobo.22.1"><img alt="image" src="images/fig1-2.jpg" xmlns="http://www.w3.org/1999/xhtml"></img></span></span></div>
<div class="caption"><span><b><span class="koboSpan" id="kobo.23.1">Figure 1-2</span></b><span class="koboSpan" id="kobo.24.1">   </span><i><span class="koboSpan" id="kobo.25.1">The Arduino and your computer</span></i></span></div>
</div>
<div class="indent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.26.1">An Arduino is unlike a conventional computer in that it has hardly any memory, no operating system, and no keyboard mouse or screen interface. </span><span class="koboSpan" id="kobo.26.2">Its purpose is to control things by interfacing with sensors and actuators. </span><span class="koboSpan" id="kobo.26.3">So, for instance, you might attach a sensor to measure the temperature and a relay to control the power to a heater.</span></span></div>
<div class="indent" xmlns="http://www.w3.org/1999/xhtml"><span><a href="#fig1-3"><span class="koboSpan" id="kobo.27.1">Figure 1-3</span></a><span class="koboSpan" id="kobo.28.1"> shows some of the things that you can attach to an Arduino board. </span><span class="koboSpan" id="kobo.28.2">There are no doubt many more types of devices that you can connect to an Arduino board.</span></span></div>
<div class="break" xmlns="http://www.w3.org/1999/xhtml">
<div id="fig1-3" class="image"><span><span class="koboSpan" id="kobo.29.1"><img alt="image" src="images/fig1-3.jpg" xmlns="http://www.w3.org/1999/xhtml"></img></span></span></div>
<div class="caption"><span><b><span class="koboSpan" id="kobo.30.1">Figure 1-3</span></b><span class="koboSpan" id="kobo.31.1">   </span><i><span class="koboSpan" id="kobo.32.1">Interfacing with an Arduino</span></i></span></div>
</div>
<div class="indent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.33.1">Here is a short selection of some of the amazing projects that have been built using an Arduino:</span></span></div>
<div class="hangbull" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.34.1">•  Bubblino—an Arduino linked to a bubble machine that blows bubbles when you tweet it!</span></span></div>
<div class="hangbull" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.35.1">•  3D LED cubes</span></span></div>
<div class="hangbull" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.36.1">•  Geiger counters</span></span></div>
<div class="hangbull" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.37.1">•  Musical instruments</span></span></div>
<div class="hangbull" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.38.1">•  Remote sensors</span></span></div>
<div class="hangbull" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.39.1">•  Robots</span></span></div>
<div class="image2" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.40.1"><img width="100%" alt="image" src="images/line2.jpg" xmlns="http://www.w3.org/1999/xhtml"></img></span></span></div>
<div id="c1-2" class="head" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.41.1">Installation and the IDE</span></span></div>
<div class="noindent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.42.1">The software that you use to program the Arduino is called the </span><i><span class="koboSpan" id="kobo.43.1">Arduino Integrated Development Environment (IDE)</span></i><span class="koboSpan" id="kobo.44.1">. </span><span class="koboSpan" id="kobo.44.2">If you are a software developer and accustomed to using complex IDEs like Eclipse or Visual Studio, you’ll find the Arduino IDE very simple—and possibly find yourself wishing for repository integration, command completion, and the like. </span><span class="koboSpan" id="kobo.44.3">If you are relatively new to programming, you will love the Arduino’s simplicity and ease of use.</span></span></div>
<div id="c1-3" class="head1" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.45.1">Installing the IDE</span></span></div>
<div class="noindent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.46.1">The first step is to download the software for your type of computer from the official Arduino website: </span><a href="http://arduino.cc/en/Main/Software"><span class="koboSpan" id="kobo.47.1">http://arduino.cc/en/Main/Software</span></a><span class="koboSpan" id="kobo.48.1">.</span></span></div>
<div class="indent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.49.1">Once you’ve downloaded the software, then you can find detailed installation instructions for each platform here: </span><a href="http://arduino.cc/en/Guide/HomePage"><span class="koboSpan" id="kobo.50.1">http://arduino.cc/en/Guide/HomePage</span></a><span class="koboSpan" id="kobo.51.1">.</span></span></div>
<div class="indent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.52.1">One of the nice things about the Arduino is that all you need to get started is an Arduino, a computer, and a USB lead to connect the two. </span><span class="koboSpan" id="kobo.52.2">The Arduino can even be powered over the USB connection to the computer.</span></span></div>
<div id="c1-4" class="head1" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.53.1">Blink</span></span></div>
<div class="noindent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.54.1">To prove that the Arduino is working, we are going to program it to flash an LED that is labeled </span><i><span class="koboSpan" id="kobo.55.1">L</span></i><span class="koboSpan" id="kobo.56.1"> on the Arduino board and hence is known as the “L” LED.</span></span></div>
<div class="indent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.57.1">Start by launching the Arduino IDE on your computer. </span><span class="koboSpan" id="kobo.57.2">Then, from the File menu, (</span><a href="#fig1-4"><span class="koboSpan" id="kobo.58.1">Figure 1-4</span></a><span class="koboSpan" id="kobo.59.1">) select Examples | 01 Basics | Blink.</span></span></div>
<div class="break" xmlns="http://www.w3.org/1999/xhtml">
<div id="fig1-4" class="image"><span><span class="koboSpan" id="kobo.60.1"><img alt="image" src="images/fig1-4.jpg" xmlns="http://www.w3.org/1999/xhtml"></img></span></span></div>
<div class="caption"><span><b><span class="koboSpan" id="kobo.61.1">Figure 1-4</span></b><span class="koboSpan" id="kobo.62.1">   </span><i><span class="koboSpan" id="kobo.63.1">The Arduino IDE loading Blink</span></i></span></div>
</div>
<div class="indent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.64.1">In an attempt to make programming the Arduino sound less daunting to nonprogrammers, programs on the Arduino are referred to as </span><i><span class="koboSpan" id="kobo.65.1">sketches</span></i><span class="koboSpan" id="kobo.66.1">. </span><span class="koboSpan" id="kobo.66.2">Before you can send the Blink sketch to your Arduino, you need to tell the Arduino IDE what type of Arduino you’re using. </span><span class="koboSpan" id="kobo.66.3">The most common type is the Arduino Uno, and in this chapter, I assume that is what you have. </span><span class="koboSpan" id="kobo.66.4">So from the Tools | Board menu, select Arduino Uno (</span><a href="#fig1-5"><span class="koboSpan" id="kobo.67.1">Figure 1-5</span></a><span class="koboSpan" id="kobo.68.1">).</span></span></div>
<div class="break" xmlns="http://www.w3.org/1999/xhtml">
<div id="fig1-5" class="image"><span><span class="koboSpan" id="kobo.69.1"><img alt="image" src="images/fig1-5.jpg" xmlns="http://www.w3.org/1999/xhtml"></img></span></span></div>
<div class="caption"><span><b><span class="koboSpan" id="kobo.70.1">Figure 1-5</span></b><span class="koboSpan" id="kobo.71.1">   </span><i><span class="koboSpan" id="kobo.72.1">Selecting the board type</span></i></span></div>
</div>
<div class="indent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.73.1">As well as selecting the board type, you also need to select the port it is connected to. </span><span class="koboSpan" id="kobo.73.2">In Windows this is easy, as it is usually COM4 and will probably be the only port in the list (see </span><a href="#fig1-6"><span class="koboSpan" id="kobo.74.1">Figure 1-6</span></a><span class="koboSpan" id="kobo.75.1">). </span><span class="koboSpan" id="kobo.75.2">On a Mac or Linux computer, however, there will generally be more serial devices listed. </span><span class="koboSpan" id="kobo.75.3">The Arduino IDE shows the most recently connected devices first, so your Arduino board should be at the top of the list.</span></span></div>
<div class="break" xmlns="http://www.w3.org/1999/xhtml">
<div id="fig1-6" class="image"><span><span class="koboSpan" id="kobo.76.1"><img alt="image" src="images/fig1-6.jpg" xmlns="http://www.w3.org/1999/xhtml"></img></span></span></div>
<div class="caption"><span><b><span class="koboSpan" id="kobo.77.1">Figure 1-6</span></b><span class="koboSpan" id="kobo.78.1">   </span><i><span class="koboSpan" id="kobo.79.1">Selecting the serial port</span></i></span></div>
</div>
<div class="indent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.80.1">To actually upload the sketch onto the Arduino board, click the Upload button on the toolbar. </span><span class="koboSpan" id="kobo.80.2">This is the second button on the toolbar, which is highlighted in </span><a href="#fig1-7"><span class="koboSpan" id="kobo.81.1">Figure 1-7</span></a><span class="koboSpan" id="kobo.82.1">.</span></span></div>
<div class="break" xmlns="http://www.w3.org/1999/xhtml">
<div id="fig1-7" class="image"><span><span class="koboSpan" id="kobo.83.1"><img alt="image" src="images/fig1-7.jpg" xmlns="http://www.w3.org/1999/xhtml"></img></span></span></div>
<div class="caption"><span><b><span class="koboSpan" id="kobo.84.1">Figure 1-7</span></b><span class="koboSpan" id="kobo.85.1">   </span><i><span class="koboSpan" id="kobo.86.1">Uploading the Blink sketch</span></i></span></div>
</div>
<div class="indent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.87.1">Once, you click the Upload button, a few things should happen. </span><span class="koboSpan" id="kobo.87.2">First, a progress bar will appear as the Arduino IDE compiles the sketch (meaning it converts the sketch into a suitable form for uploading). </span><span class="koboSpan" id="kobo.87.3">Then, the LEDs on the Arduino labeled </span><i><span class="koboSpan" id="kobo.88.1">Rx</span></i><span class="koboSpan" id="kobo.89.1"> and </span><i><span class="koboSpan" id="kobo.90.1">Tx</span></i><span class="koboSpan" id="kobo.91.1"> should flicker for a while. </span><span class="koboSpan" id="kobo.91.2">Finally, the LED labeled </span><i><span class="koboSpan" id="kobo.92.1">L</span></i><span class="koboSpan" id="kobo.93.1"> should start to blink. </span><span class="koboSpan" id="kobo.93.2">The Arduino IDE will also display a message like “Binary sketch size: 1,084 bytes (of a 32,256 byte maximum).” </span><span class="koboSpan" id="kobo.93.3">This means the sketch has used about 1kB of the 32kB of the flash memory available for programs on the Arduino.</span></span></div>
<div class="indent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.94.1">Before you start programming, let’s have a look at the hardware that your programs, or sketches, will have to work within and have available for their use.</span></span></div>
<div class="image2" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.95.1"><img width="100%" alt="image" src="images/line2.jpg" xmlns="http://www.w3.org/1999/xhtml"></img></span></span></div>
<div id="c1-5" class="head" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.96.1">A Tour of Arduino</span></span></div>
<div class="noindent" xmlns="http://www.w3.org/1999/xhtml"><span><a href="#fig1-8"><span class="koboSpan" id="kobo.97.1">Figure 1-8</span></a><span class="koboSpan" id="kobo.98.1"> shows the anatomy of an Arduino Board. </span><span class="koboSpan" id="kobo.98.2">Starting at the top, next to the USB socket in the top-left corner, is the Reset switch. </span><span class="koboSpan" id="kobo.98.3">Clicking this sends a logic pulse to the microcontroller’s Reset pin, clearing the microcontroller’s memory so it can start its program fresh. </span><span class="koboSpan" id="kobo.98.4">Note that any program stored on the device is retained because it is kept in </span><i><span class="koboSpan" id="kobo.99.1">nonvolatile</span></i><span class="koboSpan" id="kobo.100.1"> flash memory—that is, memory that remembers even when the device is not powered on.</span></span></div>
<div class="break" xmlns="http://www.w3.org/1999/xhtml">
<div id="fig1-8" class="image"><span><span class="koboSpan" id="kobo.101.1"><img alt="image" src="images/fig1-8.jpg" xmlns="http://www.w3.org/1999/xhtml"></img></span></span></div>
<div class="caption"><span><b><span class="koboSpan" id="kobo.102.1">Figure 1-8</span></b><span class="koboSpan" id="kobo.103.1">   </span><i><span class="koboSpan" id="kobo.104.1">Anatomy of an Arduino board</span></i></span></div>
</div>
<div id="c1-6" class="head1" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.105.1">Power Supply</span></span></div>
<div class="noindent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.106.1">The Arduino can either be powered through either the USB connection or the DC power socket below it. </span><span class="koboSpan" id="kobo.106.2">When powering the Arduino from a DC adaptor or batteries, anything between 7.5 and 12V DC can be supplied through the power socket. </span><span class="koboSpan" id="kobo.106.3">The Arduino itself only uses about 50mA. </span><span class="koboSpan" id="kobo.106.4">So a small PP3 9V battery (200mAh) will power it for around 40 hours.</span></span></div>
<div class="indent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.107.1">When the Arduino is powered on, the power LED on the right of the Uno (on the left of the Leonardo) is lit.</span></span></div>
<div id="c1-7" class="head1" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.108.1">Power Connections</span></span></div>
<div class="noindent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.109.1">Next, let’s look at the connectors at the bottom of </span><a href="#fig1-8"><span class="koboSpan" id="kobo.110.1">Figure 1-8</span></a><span class="koboSpan" id="kobo.111.1">. </span><span class="koboSpan" id="kobo.111.2">Apart from the first connection, you can read the connection names next to the connectors.</span></span></div>
<div class="indent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.112.1">The first unlabeled connection is reserved for later use. </span><span class="koboSpan" id="kobo.112.2">The next pin, </span><i><span class="koboSpan" id="kobo.113.1">IOREF</span></i><span class="koboSpan" id="kobo.114.1">, indicates the voltage at which the Arduino operates. </span><span class="koboSpan" id="kobo.114.2">Both the Uno and Leonardo operate at 5V, so this pin will always be set at 5V, but you will not use it for anything described in this book. </span><span class="koboSpan" id="kobo.114.3">Its purpose is to allow shields attached to 3V Arduinos like the Arduino Due to detect the voltage at which the Arduino operates.</span></span></div>
<div class="indent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.115.1">The next connect is Reset. </span><span class="koboSpan" id="kobo.115.2">This connection does the same thing as pressing the Reset switch on the Arduino. </span><span class="koboSpan" id="kobo.115.3">Rather like rebooting a PC, it resets the microcontroller to begin its program from the start. </span><span class="koboSpan" id="kobo.115.4">The Reset connector allows you to reset the microcontroller by momentarily setting this pin low (connecting it to GND). </span><span class="koboSpan" id="kobo.115.5">It is fairly unlikely that you’ll need to do this, but it’s quite nice to know that the connector is there.</span></span></div>
<div class="indent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.116.1">The remaining pins provide different voltages (3.3, 5, GND, and 9), as labeled. </span><i><span class="koboSpan" id="kobo.117.1">GND</span></i><span class="koboSpan" id="kobo.118.1">, or </span><i><span class="koboSpan" id="kobo.119.1">ground</span></i><span class="koboSpan" id="kobo.120.1">, just means zero volts. </span><span class="koboSpan" id="kobo.120.2">It is the reference voltage to which all other voltages on the board are relative.</span></span></div>
<div class="indent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.121.1">The two GND connections are identical; having more than one GND pin to connect things to is useful. </span><span class="koboSpan" id="kobo.121.2">In fact, there is another GND socket at the top of the board.</span></span></div>
<div id="c1-8" class="head1" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.122.1">Analog Inputs</span></span></div>
<div class="noindent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.123.1">The next section of connections is labeled Analog In 0 to 5. </span><span class="koboSpan" id="kobo.123.2">These six pins can be used to measure the voltage connected to them so the value can be used in a sketch. </span><span class="koboSpan" id="kobo.123.3">Although labeled as analog inputs, these connections can also be used as digital inputs or outputs. </span><span class="koboSpan" id="kobo.123.4">By default, however, they are analog inputs.</span></span></div>
<div id="c1-9" class="head1" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.124.1">Digital Connections</span></span></div>
<div class="noindent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.125.1">Now let’s switch to the top connector, starting on the right side (</span><a href="#fig1-8"><span class="koboSpan" id="kobo.126.1">Figure 1-8</span></a><span class="koboSpan" id="kobo.127.1">). </span><span class="koboSpan" id="kobo.127.2">We have pins labeled Digital 0 to 13. </span><span class="koboSpan" id="kobo.127.3">These can be used as either inputs or outputs. </span><span class="koboSpan" id="kobo.127.4">When using them as outputs, you can control them from a sketch. </span><span class="koboSpan" id="kobo.127.5">If you turn them on from your sketch, they will be at 5V, and if you turn them off, they will be at 0V. </span><span class="koboSpan" id="kobo.127.6">As with the supply connectors, you have to be careful not to exceed their maximum current capabilities.</span></span></div>
<div class="indent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.128.1">These connections can supply 40mA at 5V—more than enough power to light a standard LED, but not enough to drive an electric motor directly.</span></span></div>
<div class="image2" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.129.1"><img width="100%" alt="image" src="images/line2.jpg" xmlns="http://www.w3.org/1999/xhtml"></img></span></span></div>
<div id="c1-10" class="head" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.130.1">Arduino Boards</span></span></div>
<div class="noindent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.131.1">The Arduino Uno (</span><a href="#fig1-1"><span class="koboSpan" id="kobo.132.1">Figure 1-1</span></a><span class="koboSpan" id="kobo.133.1">) is the current incarnation of the original Arduino board. </span><span class="koboSpan" id="kobo.133.2">It is the most common Arduino board and is generally what people mean when they say they are using an Arduino.</span></span></div>
<div class="indent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.134.1">The other types of Arduino board all satisfy special requirements, like the need for more I/O (input/output) connections, faster performance, or a smaller board, or to be stitched into clothing, connect to Android phones, or integrate easily with wireless and so on.</span></span></div>
<div class="indent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.135.1">No matter how different the hardware, each board is programmed from the Arduino IDE, with only minor variations in the software features they can use. </span><span class="koboSpan" id="kobo.135.2">Once you have learned how to use one Arduino Board, you have pretty much learned how to use all of them.</span></span></div>
<div class="indent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.136.1">Let’s look at the current range of official Arduino boards. </span><span class="koboSpan" id="kobo.136.2">There are other Arduinos than the ones discussed here, but they tend not to be that popular. </span><span class="koboSpan" id="kobo.136.3">For a full list of boards, check out the official Arduino website (</span><a href="http://www.arduino.cc"><span class="koboSpan" id="kobo.137.1">www.arduino.cc</span></a><span class="koboSpan" id="kobo.138.1">).</span></span></div>
<div id="c1-11" class="head1" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.139.1">Uno and Similar</span></span></div>
<div class="noindent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.140.1">The Uno R3 is the latest of a series of “standard” boards that include the plain Uno, Duemilanove, Diecimila, and NG. </span><span class="koboSpan" id="kobo.140.2">These boards all use the ATmega168 or ATmega328 microprocessors, which are pretty much the same, apart from differing amounts of memory.</span></span></div>
<div class="indent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.141.1">The other current Arduino, with the same size and connections as the Uno R3, is the Arduino Leonardo (</span><a href="#fig1-9"><span class="koboSpan" id="kobo.142.1">Figure 1-9</span></a><span class="koboSpan" id="kobo.143.1">). </span><span class="koboSpan" id="kobo.143.2">As you can see, the board is much more sparsely populated than the Uno. </span><span class="koboSpan" id="kobo.143.3">This is because it uses a different processor. </span><span class="koboSpan" id="kobo.143.4">The Leonardo uses the ATmega32u4, which is similar to the ATmega328 but includes a built-in USB interface, removing the need for the extra components that you find on the Uno. </span><span class="koboSpan" id="kobo.143.5">Moreover, the Leonardo has slightly more memory, more analog inputs, and other benefits. </span><span class="koboSpan" id="kobo.143.6">It is also less expensive than the Uno. </span><span class="koboSpan" id="kobo.143.7">In many respects, it is also a better design than the Uno.</span></span></div>
<div class="break" xmlns="http://www.w3.org/1999/xhtml">
<div id="fig1-9" class="image"><span><span class="koboSpan" id="kobo.144.1"><img alt="image" src="images/fig1-9.jpg" xmlns="http://www.w3.org/1999/xhtml"></img></span></span></div>
<div class="caption"><span><b><span class="koboSpan" id="kobo.145.1">Figure 1-9</span></b><span class="koboSpan" id="kobo.146.1">   </span><i><span class="koboSpan" id="kobo.147.1">The Arduino Leonardo</span></i></span></div>
</div>
<div class="indent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.148.1">If this is the case, then you might be wondering why the Leonardo is not the most popular Arduino board, rather than the Uno. </span><span class="koboSpan" id="kobo.148.2">The reason is that the improvements offered by the Leonardo come at the cost of making it slightly incompatible with the Uno and its predecessors. </span><span class="koboSpan" id="kobo.148.3">Some expansion shields (especially old designs) will not work on the Leonardo. </span><span class="koboSpan" id="kobo.148.4">In time, these differences will become less of a problem. </span><span class="koboSpan" id="kobo.148.5">At that point, it will be interesting to see if the Leonardo and its successors become the more popular boards.</span></span></div>
<div class="indent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.149.1">The Arduino Ethernet is a relatively new addition to the Arduino stable. </span><span class="koboSpan" id="kobo.149.2">It combines basic Uno features with an Ethernet interface, allowing you to connect it to a network, without having to add an Ethernet shield.</span></span></div>
<div id="c1-12" class="head1" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.150.1">Big Arduino Boards</span></span></div>
<div class="noindent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.151.1">Sometimes an Uno or Leonardo just doesn’t have enough I/O pins for the application that you intend to use it for. </span><span class="koboSpan" id="kobo.151.2">The choice then arises of either using hardware expansion for the Uno or switching to a bigger board.</span></span></div>
<div class="note" xmlns="http://www.w3.org/1999/xhtml"><span><b><i><span class="koboSpan" id="kobo.152.1">TIP</span></i></b><span class="koboSpan" id="kobo.153.1">   </span><i><span class="koboSpan" id="kobo.154.1">If you are coming to Arduino for the first time, do not buy one of these larger boards. </span><span class="koboSpan" id="kobo.154.2">It is tempting because they are bigger and faster, but they have shield compatibility problems and you will be much better off with a “standard” Uno</span></i><span class="koboSpan" id="kobo.155.1">.</span></span></div>
<div class="indent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.156.1">The super-sized Arduinos have the same sockets as an Uno, but then they add a double row of extra I/O pins on the end and a longer length of pins along the side (</span><a href="#fig1-10"><span class="koboSpan" id="kobo.157.1">Figure 1-10</span></a><span class="koboSpan" id="kobo.158.1">).</span></span></div>
<div class="break" xmlns="http://www.w3.org/1999/xhtml">
<div id="fig1-10" class="image"><span><span class="koboSpan" id="kobo.159.1"><img alt="image" src="images/fig1-10.jpg" xmlns="http://www.w3.org/1999/xhtml"></img></span></span></div>
<div class="caption"><span><b><span class="koboSpan" id="kobo.160.1">Figure 1-10</span></b><span class="koboSpan" id="kobo.161.1">   </span><i><span class="koboSpan" id="kobo.162.1">The Arduino Due</span></i></span></div>
</div>
<div class="indent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.163.1">Traditionally, the “bigger” board would be an Arduino Mega 2560. </span><span class="koboSpan" id="kobo.163.2">These boards, in common with all the larger Arduino boards, have more of every kind of memory. </span><span class="koboSpan" id="kobo.163.3">The Mega 2560 and Mega ADK both use processors with similar power to the Arduino Uno. </span><span class="koboSpan" id="kobo.163.4">However, the Arduino Due is an altogether more powerful beast. </span><span class="koboSpan" id="kobo.163.5">This power comes in the form of a 84 MHz processor (compared with the Uno’s 16 MHz) but at the cost of further compatibility problems. </span><span class="koboSpan" id="kobo.163.6">The biggest of these is that the Due operates at 3.3V rather than the 5Vs of most previous Arduinos. </span><span class="koboSpan" id="kobo.163.7">Not surprisingly, this means that many Arduino shields are incompatible with it.</span></span></div>
<div class="indent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.164.1">For the most demanding projects, however, this board has many advantages.</span></span></div>
<div class="hangbull" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.165.1">•  Lots of memory for programming and data</span></span></div>
<div class="hangbull" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.166.1">•  Hardware music output capabilities (hardware digital to analog converters)</span></span></div>
<div class="hangbull" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.167.1">•  Four serial ports</span></span></div>
<div class="hangbull" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.168.1">•  Two USB ports</span></span></div>
<div class="hangbull" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.169.1">•  USB host and OTG interfaces</span></span></div>
<div class="hangbull" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.170.1">•  USB keyboard and mouse emulation</span></span></div>
<div id="c1-13" class="head1" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.171.1">Small Arduino Boards</span></span></div>
<div class="noindent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.172.1">Just as the Uno is too small for some projects, it can also be too big for others. </span><span class="koboSpan" id="kobo.172.2">Although Arduino boards are low cost, it gets expensive if you start leaving one embedded in every project you make. </span><span class="koboSpan" id="kobo.172.3">There are a range of smaller and “pro” Arduino boards, designed either to be physically smaller than a regular Uno or to keep costs down by omitting features not required in most projects.</span></span></div>
<div class="indent" xmlns="http://www.w3.org/1999/xhtml"><span><a href="#fig1-11"><span class="koboSpan" id="kobo.173.1">Figure 1-11</span></a><span class="koboSpan" id="kobo.174.1"> shows an Arduino Mini. </span><span class="koboSpan" id="kobo.174.2">These boards do not have a USB interface; rather, you need a separate adaptor module to program them. </span><span class="koboSpan" id="kobo.174.3">As well as the Mini, there are also Nanos and Micros, both of which have built-in USB but cost more.</span></span></div>
<div class="break" xmlns="http://www.w3.org/1999/xhtml">
<div id="fig1-11" class="image"><span><span class="koboSpan" id="kobo.175.1"><img alt="image" src="images/fig1-11.jpg" xmlns="http://www.w3.org/1999/xhtml"></img></span></span></div>
<div class="caption"><span><b><span class="koboSpan" id="kobo.176.1">Figure 1-11</span></b><span class="koboSpan" id="kobo.177.1">   </span><i><span class="koboSpan" id="kobo.178.1">An Arduino Mini and Programmer</span></i></span></div>
</div>
<div id="c1-14" class="head1" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.179.1">LilyPad and LilyPad USB Boards</span></span></div>
<div class="noindent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.180.1">One of the most interesting Arduino styles is the LilyPad (</span><a href="#fig1-12"><span class="koboSpan" id="kobo.181.1">Figure 1-12</span></a><span class="koboSpan" id="kobo.182.1">) and the newer LilyPad USB. </span><span class="koboSpan" id="kobo.182.2">These boards are designed to be stitched into clothing using conductive threads and a range of similar LilyPad modules—for LEDs, switches, accelerometers, and so on. </span><span class="koboSpan" id="kobo.182.3">The older LilyPad boards require a separate USB interface, the same one required for the Arduino Mini. </span><span class="koboSpan" id="kobo.182.4">However, these boards are gradually being replaced by the Arduino LilyPad USB, which has a built-in USB connector.</span></span></div>
<div class="break" xmlns="http://www.w3.org/1999/xhtml">
<div id="fig1-12" class="image"><span><span class="koboSpan" id="kobo.183.1"><img alt="image" src="images/fig1-12.jpg" xmlns="http://www.w3.org/1999/xhtml"></img></span></span></div>
<div class="caption"><span><b><span class="koboSpan" id="kobo.184.1">Figure 1-12</span></b><span class="koboSpan" id="kobo.185.1">   </span><i><span class="koboSpan" id="kobo.186.1">An Arduino LilyPad</span></i></span></div>
</div>
<div id="c1-15" class="head1" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.187.1">Unofficial Arduinos</span></span></div>
<div class="noindent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.188.1">As well as the “official” boards just described, there are also many unofficial copies and variations on the Arduino hardware, given its open source status. </span><span class="koboSpan" id="kobo.188.2">Straight Arduino clones are easy to come by on eBay and other low-cost outlets and are simply copies of the Arduino designs. </span><span class="koboSpan" id="kobo.188.3">They are only really of interest because of their price. </span><span class="koboSpan" id="kobo.188.4">There are also some interesting Arduino-based designs that offer extra features.</span></span></div>
<div class="indent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.189.1">Two examples of these kind of boards that are worth looking at are</span></span></div>
<div class="hangbull" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.190.1">•  </span><b><span class="koboSpan" id="kobo.191.1">EtherTen</span></b><span class="koboSpan" id="kobo.192.1">   Arduino Ethernet-type board (</span><a href="http://www.freetronics.com/products/etherten"><span class="koboSpan" id="kobo.193.1">www.freetronics.com/products/etherten</span></a><span class="koboSpan" id="kobo.194.1">)</span></span></div>
<div class="hangbull" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.195.1">•  </span><b><span class="koboSpan" id="kobo.196.1">Leostick</span></b><span class="koboSpan" id="kobo.197.1">   A slim-line Leonardo-type board with built-in USB plug (</span><a href="http://www.freetronics.com/collections/arduino/products/leostick"><span class="koboSpan" id="kobo.198.1">www.freetronics.com/collections/arduino/products/leostick</span></a><span class="koboSpan" id="kobo.199.1">)</span></span></div>
<div class="indent1" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.200.1">Now that you have a bit more information about the hardware side of an Arduino, we can turn to programming it.</span></span></div>
<div class="image2" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.201.1"><img width="100%" alt="image" src="images/line2.jpg" xmlns="http://www.w3.org/1999/xhtml"></img></span></span></div>
<div id="c1-16" class="head" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.202.1">Programming Language</span></span></div>
<div class="noindent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.203.1">A common misconception about Arduinos is that they have their own programming language. </span><span class="koboSpan" id="kobo.203.2">Actually, they are programmed in the language simply called </span><i><span class="koboSpan" id="kobo.204.1">C</span></i><span class="koboSpan" id="kobo.205.1">. </span><span class="koboSpan" id="kobo.205.2">This language has been around since the early days of computing. </span><span class="koboSpan" id="kobo.205.3">What Arduino does provide is a nice easy-to-use set of commands written in C that you can use in your programs.</span></span></div>
<div class="indent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.206.1">Purists may wish to point out that Arduino uses C++, the object-oriented extension to C. </span><span class="koboSpan" id="kobo.206.2">Although, strictly speaking, this is true, having only 1 or 2kB of memory available generally means that the kinds of habits encouraged by object-oriented programming are not normally a good idea with Arduino, so aside from a few specialized areas, you are effectively programming in C.</span></span></div>
<div class="indent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.207.1">Let’s start by modifying the Blink sketch.</span></span></div>
<div class="image2" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.208.1"><img width="100%" alt="image" src="images/line2.jpg" xmlns="http://www.w3.org/1999/xhtml"></img></span></span></div>
<div id="c1-17" class="head" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.209.1">Modifying the Blink Sketch</span></span></div>
<div class="noindent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.210.1">It may be that your Arduino was already blinking when you first plugged it in. </span><span class="koboSpan" id="kobo.210.2">That is because the Arduino is often shipped with the Blink sketch installed.</span></span></div>
<div class="indent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.211.1">If this is the case, then you might like to prove to yourself that you have actually done something by changing the blink rate. </span><span class="koboSpan" id="kobo.211.2">Let’s look at the Blink sketch to see how to change it to make the LED blink faster.</span></span></div>
<div class="indent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.212.1">The first part of the sketch is just a comment telling you what the sketch is supposed to do. </span><span class="koboSpan" id="kobo.212.2">A comment is not actual program code. </span><span class="koboSpan" id="kobo.212.3">Part of the preparation for the code being uploaded is for all such “comments” to be stripped out. </span><span class="koboSpan" id="kobo.212.4">Anything between </span><b><span class="koboSpan" id="kobo.213.1">/*</span></b><span class="koboSpan" id="kobo.214.1"> and </span><b><span class="koboSpan" id="kobo.215.1">*/</span></b><span class="koboSpan" id="kobo.216.1"> is ignored by the computer, but should be readable by humans.</span></span></div>
<div class="image3" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.217.1"><img alt="image" src="images/p15-01.jpg" xmlns="http://www.w3.org/1999/xhtml"></img></span></span></div>
<div class="indent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.218.1">Then, there are two individual line comments, just like the block comments, except they start with </span><b><span class="koboSpan" id="kobo.219.1">//</span></b><span class="koboSpan" id="kobo.220.1">. </span><span class="koboSpan" id="kobo.220.2">These comments tell you what is happening. </span><span class="koboSpan" id="kobo.220.3">In this case, the comment helpfully tells you that pin 13 is the pin we are going to flash. </span><span class="koboSpan" id="kobo.220.4">We have chosen that pin because on an Arduino Uno it is connected to the built-in “L” LED.</span></span></div>
<div class="image3" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.221.1"><img alt="image" src="images/p16-01.jpg" xmlns="http://www.w3.org/1999/xhtml"></img></span></span></div>
<div class="indent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.222.1">The next part of the sketch is the </span><b><span class="koboSpan" id="kobo.223.1">setup</span></b><span class="koboSpan" id="kobo.224.1"> function. </span><span class="koboSpan" id="kobo.224.2">Every Arduino sketch must have a </span><b><span class="koboSpan" id="kobo.225.1">setup</span></b><span class="koboSpan" id="kobo.226.1"> function, and this function runs every time the Arduino is reset, either because (as the comment says) the Reset button is pressed or the Arduino is powered up.</span></span></div>
<div class="image3" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.227.1"><img alt="image" src="images/p16-02.jpg" xmlns="http://www.w3.org/1999/xhtml"></img></span></span></div>
<div class="indent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.228.1">The structure of this text is a little confusing if you are new to programming. </span><span class="koboSpan" id="kobo.228.2">A </span><i><span class="koboSpan" id="kobo.229.1">function</span></i><span class="koboSpan" id="kobo.230.1"> is a section of code that has been given a name (in this case, the name is </span><b><span class="koboSpan" id="kobo.231.1">setup</span></b><span class="koboSpan" id="kobo.232.1">). </span><span class="koboSpan" id="kobo.232.2">For now, just use the previous text as a template and know that you must start your sketch with the first line </span><b><span class="koboSpan" id="kobo.233.1">void setup() {</span></b><span class="koboSpan" id="kobo.234.1"> and then enter the commands that you want to issue, each on a line ending with a semicolon (</span><b><span class="koboSpan" id="kobo.235.1">;</span></b><span class="koboSpan" id="kobo.236.1">). </span><span class="koboSpan" id="kobo.236.2">The end of the function is marked with a </span><b><span class="koboSpan" id="kobo.237.1">}</span></b><span class="koboSpan" id="kobo.238.1"> symbol.</span></span></div>
<div class="indent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.239.1">In this case, the only command Arduino will issue is the </span><b><span class="koboSpan" id="kobo.240.1">pinMode(led, OUTPUT)</span></b><span class="koboSpan" id="kobo.241.1"> command that, not unsurprisingly, sets that pin to be an output.</span></span></div>
<div class="indent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.242.1">Next comes the juicy part of the sketch, the </span><b><span class="koboSpan" id="kobo.243.1">loop</span></b><span class="koboSpan" id="kobo.244.1"> function.</span></span></div>
<div class="indent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.245.1">Like the </span><b><span class="koboSpan" id="kobo.246.1">setup</span></b><span class="koboSpan" id="kobo.247.1"> function, every Arduino sketch has to have a </span><b><span class="koboSpan" id="kobo.248.1">loop</span></b><span class="koboSpan" id="kobo.249.1"> function. </span><span class="koboSpan" id="kobo.249.2">Unlike </span><b><span class="koboSpan" id="kobo.250.1">setup</span></b><span class="koboSpan" id="kobo.251.1">, which only runs once after a reset, the </span><b><span class="koboSpan" id="kobo.252.1">loop</span></b><span class="koboSpan" id="kobo.253.1"> function runs continuously. </span><span class="koboSpan" id="kobo.253.2">That is, as soon as all its instructions have been run, it starts again.</span></span></div>
<div class="indent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.254.1">In the </span><b><span class="koboSpan" id="kobo.255.1">loop</span></b><span class="koboSpan" id="kobo.256.1"> function, you turn on the LED by issuing the </span><b><span class="koboSpan" id="kobo.257.1">digitalWrite(led, HIGH)</span></b><span class="koboSpan" id="kobo.258.1"> instruction. </span><span class="koboSpan" id="kobo.258.2">You then set the sketch to pause for a second by using the command </span><b><span class="koboSpan" id="kobo.259.1">delay(1000)</span></b><span class="koboSpan" id="kobo.260.1">. </span><span class="koboSpan" id="kobo.260.2">The value 1000 is for 1000 milliseconds or 1 second. </span><span class="koboSpan" id="kobo.260.3">You then turn the LED back on again and delay for another second before the whole process starts over.</span></span></div>
<div class="image3" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.261.1"><img alt="image" src="images/p17-01.jpg" xmlns="http://www.w3.org/1999/xhtml"></img></span></span></div>
<div class="indent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.262.1">To modify this sketch to make the LED blink faster, change both occurrences of 1000 to be </span><b><span class="koboSpan" id="kobo.263.1">200</span></b><span class="koboSpan" id="kobo.264.1">. </span><span class="koboSpan" id="kobo.264.2">These changes are both in the </span><b><span class="koboSpan" id="kobo.265.1">loop</span></b><span class="koboSpan" id="kobo.266.1"> function, so your function should now look like this:</span></span></div>
<div class="image3" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.267.1"><img alt="image" src="images/p17-02.jpg" xmlns="http://www.w3.org/1999/xhtml"></img></span></span></div>
<div class="indent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.268.1">If you try and save the sketch before uploading it, the Arduino IDE reminds you that it is a “read-only” example sketch, but it will offer you the option to save it as a copy, which you can then modify to your heart’s content.</span></span></div>
<div class="indent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.269.1">You do not have to do this; you can just upload the sketch unsaved. </span><span class="koboSpan" id="kobo.269.2">But if you do decide to save this or any other sketch, you will find that it then appears in the File | Sketchbook menu on the Arduino IDE.</span></span></div>
<div class="indent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.270.1">So, either way, click the Upload button again, and when the uploading is complete, the Arduino resets itself and the LED should start to blink much faster.</span></span></div>
<div class="image2" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.271.1"><img width="100%" alt="image" src="images/line2.jpg" xmlns="http://www.w3.org/1999/xhtml"></img></span></span></div>
<div id="c1-18" class="head" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.272.1">Variables</span></span></div>
<div class="noindent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.273.1">Variables give a name to a number. </span><span class="koboSpan" id="kobo.273.2">Actually, they can be a lot more powerful than this, but for now, we’ll use them for this purpose.</span></span></div>
<div class="indent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.274.1">When defining a variable in C, you have to specify the type of variable. </span><span class="koboSpan" id="kobo.274.2">For example, if you want your variables to be whole numbers, you would use </span><i><span class="koboSpan" id="kobo.275.1">int</span></i><span class="koboSpan" id="kobo.276.1"> (short for </span><i><span class="koboSpan" id="kobo.277.1">integer</span></i><span class="koboSpan" id="kobo.278.1">). </span><span class="koboSpan" id="kobo.278.2">To define a variable called </span><b><span class="koboSpan" id="kobo.279.1">delayPeriod</span></b><span class="koboSpan" id="kobo.280.1"> with a value of </span><b><span class="koboSpan" id="kobo.281.1">200</span></b><span class="koboSpan" id="kobo.282.1">, you need to write:</span></span></div>
<div class="image3" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.283.1"><img alt="image" src="images/p17-03.jpg" xmlns="http://www.w3.org/1999/xhtml"></img></span></span></div>
<div class="noindent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.284.1">Notice that because </span><b><span class="koboSpan" id="kobo.285.1">delayPeriod</span></b><span class="koboSpan" id="kobo.286.1"> is a name, there cannot be any spaces between words. </span><span class="koboSpan" id="kobo.286.2">The convention is to start variables with a lowercase letter and begin each new word with an uppercase letter. </span><span class="koboSpan" id="kobo.286.3">Programmers often call this </span><i><span class="koboSpan" id="kobo.287.1">bumpy case</span></i><span class="koboSpan" id="kobo.288.1"> or </span><i><span class="koboSpan" id="kobo.289.1">camel case</span></i><span class="koboSpan" id="kobo.290.1">.</span></span></div>
<div class="indent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.291.1">Let’s fit this into the blink sketch, so that instead of “hard-coding” the value </span><b><span class="koboSpan" id="kobo.292.1">200</span></b><span class="koboSpan" id="kobo.293.1"> for the length of delay, we use a variable instead:</span></span></div>
<div class="image3" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.294.1"><img alt="image" src="images/p18-01.jpg" xmlns="http://www.w3.org/1999/xhtml"></img></span></span></div>
<div class="noindent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.295.1">At each place in the sketch where we used to refer to </span><b><span class="koboSpan" id="kobo.296.1">200,</span></b><span class="koboSpan" id="kobo.297.1"> we now refer to </span><b><span class="koboSpan" id="kobo.298.1">delayPeriod</span></b><span class="koboSpan" id="kobo.299.1">.</span></span></div>
<div class="indent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.300.1">Now, if you want to make the sketch blink faster, you can just change the value of </span><b><span class="koboSpan" id="kobo.301.1">delayPeriod</span></b><span class="koboSpan" id="kobo.302.1"> in one place.</span></span></div>
<div class="image2" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.303.1"><img width="100%" alt="image" src="images/line2.jpg" xmlns="http://www.w3.org/1999/xhtml"></img></span></span></div>
<div id="c1-19" class="head" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.304.1">If</span></span></div>
<div class="noindent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.305.1">Normally, your lines of program are executed in order one after the other, with no exceptions. </span><span class="koboSpan" id="kobo.305.2">But what if you don’t want to do that? </span><span class="koboSpan" id="kobo.305.3">What if you only want to execute part of a sketch if some condition is true?</span></span></div>
<div class="indent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.306.1">A good example of that might be to only do something when a button, attached to the Arduino, is pressed. </span><span class="koboSpan" id="kobo.306.2">The code might look like this:</span></span></div>
<div class="image3" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.307.1"><img alt="image" src="images/p18-02.jpg" xmlns="http://www.w3.org/1999/xhtml"></img></span></span></div>
<div class="image3" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.308.1"><img alt="image" src="images/p19-01.jpg" xmlns="http://www.w3.org/1999/xhtml"></img></span></span></div>
<div class="noindent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.309.1">In this case, the condition (after the </span><b><span class="koboSpan" id="kobo.310.1">if</span></b><span class="koboSpan" id="kobo.311.1">) is that the value read from pin 5 has a value of </span><b><span class="koboSpan" id="kobo.312.1">LOW</span></b><span class="koboSpan" id="kobo.313.1">. </span><span class="koboSpan" id="kobo.313.2">The double equals symbol == is used for comparing two values. </span><span class="koboSpan" id="kobo.313.3">It is easy to confuse it with a single equals sign that assigns a value to a variable. </span><span class="koboSpan" id="kobo.313.4">An </span><b><span class="koboSpan" id="kobo.314.1">if</span></b><span class="koboSpan" id="kobo.315.1"> statement says, if this condition is true, then the commands inside the curly braces are executed. </span><span class="koboSpan" id="kobo.315.2">In this case, the action is to set digital output to </span><b><span class="koboSpan" id="kobo.316.1">9, HIGH</span></b><span class="koboSpan" id="kobo.317.1">.</span></span></div>
<div class="indent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.318.1">If the condition is not true, then the Arduino just continues on with the next thing. </span><span class="koboSpan" id="kobo.318.2">In this case, that is the loop function, which runs again.</span></span></div>
<div class="image2" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.319.1"><img width="100%" alt="image" src="images/line2.jpg" xmlns="http://www.w3.org/1999/xhtml"></img></span></span></div>
<div id="c1-20" class="head" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.320.1">Loops</span></span></div>
<div class="noindent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.321.1">As well as conditionally performing some of the actions, you also need your sketch to be able to repeat actions over and over again. </span><span class="koboSpan" id="kobo.321.2">You get this for free of course by putting commands into the sketch’s </span><b><span class="koboSpan" id="kobo.322.1">loop</span></b><span class="koboSpan" id="kobo.323.1"> function. </span><span class="koboSpan" id="kobo.323.2">That is, after all, what happens with the Blink example.</span></span></div>
<div class="indent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.324.1">Sometimes, however, you’ll need to be more specific about the number of times that you want to repeat something. </span><span class="koboSpan" id="kobo.324.2">You can accomplish this with the </span><b><span class="koboSpan" id="kobo.325.1">for</span></b><span class="koboSpan" id="kobo.326.1"> command, which allows you to use a counter variable. </span><span class="koboSpan" id="kobo.326.2">For example, let’s write a sketch that blinks the LED ten times. </span><span class="koboSpan" id="kobo.326.3">Later, you’ll see why this approach might be considered less than ideal under some circumstances, but for now, it will do just fine.</span></span></div>
<div class="image3" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.327.1"><img alt="image" src="images/p19-02.jpg" xmlns="http://www.w3.org/1999/xhtml"></img></span></span></div>
<div class="image3" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.328.1"><img alt="image" src="images/p20-01.jpg" xmlns="http://www.w3.org/1999/xhtml"></img></span></span></div>
<div class="note" xmlns="http://www.w3.org/1999/xhtml"><span><b><i><span class="koboSpan" id="kobo.329.1">NOTE</span></i></b><span class="koboSpan" id="kobo.330.1">   </span><i><span class="koboSpan" id="kobo.331.1">As this is the first full sketch, it’s named in a comment at the top of the file. </span><span class="koboSpan" id="kobo.331.2">All the sketches named in this way can be downloaded from the author’s website at </span><a href="http://www.simonmonk.org"><span class="koboSpan" id="kobo.332.1">www.simonmonk.org</span></a></i><span class="koboSpan" id="kobo.333.1">.</span></span></div>
<div class="note1" xmlns="http://www.w3.org/1999/xhtml"><span><i><span class="koboSpan" id="kobo.334.1">To install all the sketches into your Arduino environment, unzip the file containing the sketches into your Arduino directory, which you’ll find in your Documents folder. </span><span class="koboSpan" id="kobo.334.2">The Arduino IDE automatically creates this folder for you the first time it is run</span></i><span class="koboSpan" id="kobo.335.1">.</span></span></div>
<div class="indent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.336.1">The </span><b><span class="koboSpan" id="kobo.337.1">for</span></b><span class="koboSpan" id="kobo.338.1"> command defines a variable called </span><b><span class="koboSpan" id="kobo.339.1">i</span></b><span class="koboSpan" id="kobo.340.1"> and gives it an initial value of </span><b><span class="koboSpan" id="kobo.341.1">0</span></b><span class="koboSpan" id="kobo.342.1">. </span><span class="koboSpan" id="kobo.342.2">After the </span><b><span class="koboSpan" id="kobo.343.1">;</span></b><span class="koboSpan" id="kobo.344.1"> the text </span><b><span class="koboSpan" id="kobo.345.1">i &lt; 10</span></b><span class="koboSpan" id="kobo.346.1"> appears. </span><span class="koboSpan" id="kobo.346.2">This is the condition for staying in the loop. </span><span class="koboSpan" id="kobo.346.3">In other words, while </span><b><span class="koboSpan" id="kobo.347.1">i</span></b><span class="koboSpan" id="kobo.348.1"> is less than </span><b><span class="koboSpan" id="kobo.349.1">10</span></b><span class="koboSpan" id="kobo.350.1">, keep doing the things inside the curly brackets.</span></span></div>
<div class="indent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.351.1">The last part of the </span><b><span class="koboSpan" id="kobo.352.1">for</span></b><span class="koboSpan" id="kobo.353.1"> command is </span><b><span class="koboSpan" id="kobo.354.1">i++</span></b><span class="koboSpan" id="kobo.355.1">. </span><span class="koboSpan" id="kobo.355.2">This is C shorthand for “i = i + 1” which, not surprisingly, adds 1 to the value of </span><b><span class="koboSpan" id="kobo.356.1">i</span></b><span class="koboSpan" id="kobo.357.1">. </span><span class="koboSpan" id="kobo.357.2">One is added to the value of </span><b><span class="koboSpan" id="kobo.358.1">i</span></b><span class="koboSpan" id="kobo.359.1"> each time around the loop. </span><span class="koboSpan" id="kobo.359.2">This is what ensures that you can escape from the loop, because if you keep adding 1 to </span><b><span class="koboSpan" id="kobo.360.1">i</span></b><span class="koboSpan" id="kobo.361.1">, eventually it will be greater than 10.</span></span></div>
<div class="image2" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.362.1"><img width="100%" alt="image" src="images/line2.jpg" xmlns="http://www.w3.org/1999/xhtml"></img></span></span></div>
<div id="c1-21" class="head" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.363.1">Functions</span></span></div>
<div class="noindent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.364.1">Functions are a way to group a set of programming commands into a useful chunk. </span><span class="koboSpan" id="kobo.364.2">This helps to divide your sketch into manageable chunks, making it easier to use.</span></span></div>
<div class="indent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.365.1">For example, let’s write a sketch that makes the Arduino blink rapidly 10 times when it first starts and then blink steadily once each second thereafter.</span></span></div>
<div class="indent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.366.1">Read through the following listing, and then I’ll explain what is going on.</span></span></div>
<div class="image3" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.367.1"><img alt="image" src="images/p21-01.jpg" xmlns="http://www.w3.org/1999/xhtml"></img></span></span></div>
<div class="noindent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.368.1">The </span><b><span class="koboSpan" id="kobo.369.1">setup</span></b><span class="koboSpan" id="kobo.370.1"> function now contains a line that says </span><b><span class="koboSpan" id="kobo.371.1">flash(10, 100);</span></b><span class="koboSpan" id="kobo.372.1">. </span><span class="koboSpan" id="kobo.372.2">This means flash </span><b><span class="koboSpan" id="kobo.373.1">10</span></b><span class="koboSpan" id="kobo.374.1"> times with a </span><b><span class="koboSpan" id="kobo.375.1">delayPeriod</span></b><span class="koboSpan" id="kobo.376.1"> of </span><b><span class="koboSpan" id="kobo.377.1">100</span></b><span class="koboSpan" id="kobo.378.1"> milliseconds. </span><span class="koboSpan" id="kobo.378.2">The </span><b><span class="koboSpan" id="kobo.379.1">flash</span></b><span class="koboSpan" id="kobo.380.1"> command is not a built-in Arduino command; you are going to create this quite useful function yourself.</span></span></div>
<div class="indent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.381.1">The definition of the function is at the end of the sketch. </span><span class="koboSpan" id="kobo.381.2">The first line of the function definition is</span></span></div>
<div class="image3" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.382.1"><img alt="image" src="images/p21-02.jpg" xmlns="http://www.w3.org/1999/xhtml"></img></span></span></div>
<div class="noindent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.383.1">This tells the Arduino that you are defining your own function called </span><b><span class="koboSpan" id="kobo.384.1">flash</span></b><span class="koboSpan" id="kobo.385.1"> and that it takes two parameters, both of which are </span><b><span class="koboSpan" id="kobo.386.1">int</span></b><span class="koboSpan" id="kobo.387.1">s. </span><span class="koboSpan" id="kobo.387.2">The first is </span><b><span class="koboSpan" id="kobo.388.1">n</span></b><span class="koboSpan" id="kobo.389.1">, which is the number of times to flash the LED, and the second is </span><b><span class="koboSpan" id="kobo.390.1">delayPeriod</span></b><span class="koboSpan" id="kobo.391.1">, which is the delay to use between turning the LED on or off.</span></span></div>
<div class="indent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.392.1">These two parameter variables can only be used inside the function. </span><span class="koboSpan" id="kobo.392.2">So, </span><b><span class="koboSpan" id="kobo.393.1">n</span></b><span class="koboSpan" id="kobo.394.1"> is used in the </span><b><span class="koboSpan" id="kobo.395.1">for</span></b><span class="koboSpan" id="kobo.396.1"> command to determine how many times to repeat the loop, and </span><b><span class="koboSpan" id="kobo.397.1">delayPeriod</span></b><span class="koboSpan" id="kobo.398.1"> is used inside the </span><b><span class="koboSpan" id="kobo.399.1">delay</span></b><span class="koboSpan" id="kobo.400.1"> commands.</span></span></div>
<div class="indent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.401.1">The sketch’s </span><b><span class="koboSpan" id="kobo.402.1">loop</span></b><span class="koboSpan" id="kobo.403.1"> function also uses the previous </span><b><span class="koboSpan" id="kobo.404.1">flash</span></b><span class="koboSpan" id="kobo.405.1"> function, but with a longer </span><b><span class="koboSpan" id="kobo.406.1">delayPeriod</span></b><span class="koboSpan" id="kobo.407.1">, and it only makes the LED flash once. </span><span class="koboSpan" id="kobo.407.2">Because it is inside </span><b><span class="koboSpan" id="kobo.408.1">loop</span></b><span class="koboSpan" id="kobo.409.1">, it will just keep flashing anyway.</span></span></div>
<div class="image2" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.410.1"><img width="100%" alt="image" src="images/line2.jpg" xmlns="http://www.w3.org/1999/xhtml"></img></span></span></div>
<div id="c1-22" class="head" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.411.1">Digital Inputs</span></span></div>
<div class="noindent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.412.1">To get the most out of this section, you need to find a short length of wire or even a metal paperclip that has been straightened.</span></span></div>
<div class="indent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.413.1">Load the following sketch and run it:</span></span></div>
<div class="image3" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.414.1"><img alt="image" src="images/p22-01.jpg" xmlns="http://www.w3.org/1999/xhtml"></img></span></span></div>
<div class="indent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.415.1">Use your wire or paperclip to connect the GND pin to digital pin 7, as shown in </span><a href="#fig1-13"><span class="koboSpan" id="kobo.416.1">Figure 1-13</span></a><span class="koboSpan" id="kobo.417.1">. </span><span class="koboSpan" id="kobo.417.2">You can do this with your Arduino plugged in, but only after you have uploaded the sketch. </span><span class="koboSpan" id="kobo.417.3">The reason is that if on some previous sketch pin 7 had been set to an output, then connecting it to the GND would damage the pin. </span><span class="koboSpan" id="kobo.417.4">Since the sketch sets pin 7 to be an input, this is safe.</span></span></div>
<div class="break" xmlns="http://www.w3.org/1999/xhtml">
<div id="fig1-13" class="image"><span><span class="koboSpan" id="kobo.418.1"><img alt="image" src="images/fig1-13.jpg" xmlns="http://www.w3.org/1999/xhtml"></img></span></span></div>
<div class="caption"><span><b><span class="koboSpan" id="kobo.419.1">Figure 1-13</span></b><span class="koboSpan" id="kobo.420.1">   </span><i><span class="koboSpan" id="kobo.421.1">Using a digital input</span></i></span></div>
</div>
<div class="indent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.422.1">This is what should happen: when the paperclip is connected, the LED will flash quickly, and when it is not connected, it will flash slowly.</span></span></div>
<div class="indent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.423.1">Let’s dissect the sketch and see how it works.</span></span></div>
<div class="indent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.424.1">First, we have a new variable called </span><b><span class="koboSpan" id="kobo.425.1">switchPin</span></b><span class="koboSpan" id="kobo.426.1">. </span><span class="koboSpan" id="kobo.426.2">This variable is assigned to pin 7. </span><span class="koboSpan" id="kobo.426.3">So the paperclip is acting like a switch. </span><span class="koboSpan" id="kobo.426.4">In the </span><b><span class="koboSpan" id="kobo.427.1">setup</span></b><span class="koboSpan" id="kobo.428.1"> function, we specify that this pin will be an input using the </span><b><span class="koboSpan" id="kobo.429.1">pinMode</span></b><span class="koboSpan" id="kobo.430.1"> command. </span><span class="koboSpan" id="kobo.430.2">The second argument to </span><b><span class="koboSpan" id="kobo.431.1">pinMode</span></b><span class="koboSpan" id="kobo.432.1"> is not simply </span><b><span class="koboSpan" id="kobo.433.1">INPUT</span></b><span class="koboSpan" id="kobo.434.1"> but actually </span><b><span class="koboSpan" id="kobo.435.1">INPUT_PULLUP</span></b><span class="koboSpan" id="kobo.436.1">. </span><span class="koboSpan" id="kobo.436.2">This tells the Arduino that, by default, the input is to be </span><b><span class="koboSpan" id="kobo.437.1">HIGH</span></b><span class="koboSpan" id="kobo.438.1">, unless it is pulled </span><b><span class="koboSpan" id="kobo.439.1">LOW</span></b><span class="koboSpan" id="kobo.440.1"> by connecting it to GND (with the paperclip).</span></span></div>
<div class="indent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.441.1">In the </span><b><span class="koboSpan" id="kobo.442.1">loop</span></b><span class="koboSpan" id="kobo.443.1"> function, we use the </span><b><span class="koboSpan" id="kobo.444.1">digitalRead</span></b><span class="koboSpan" id="kobo.445.1"> command to test the value at the input pin. </span><span class="koboSpan" id="kobo.445.2">If it is </span><b><span class="koboSpan" id="kobo.446.1">LOW</span></b><span class="koboSpan" id="kobo.447.1"> (the paperclip is in place), then it calls a function called </span><b><span class="koboSpan" id="kobo.448.1">flash</span></b><span class="koboSpan" id="kobo.449.1"> with a parameter of </span><b><span class="koboSpan" id="kobo.450.1">100</span></b><span class="koboSpan" id="kobo.451.1"> (the </span><b><span class="koboSpan" id="kobo.452.1">delayPeriod</span></b><span class="koboSpan" id="kobo.453.1">). </span><span class="koboSpan" id="kobo.453.2">This makes the LED blink fast.</span></span></div>
<div class="indent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.454.1">If, on the other hand, the input is </span><b><span class="koboSpan" id="kobo.455.1">HIGH</span></b><span class="koboSpan" id="kobo.456.1">, then the commands in the </span><b><span class="koboSpan" id="kobo.457.1">else</span></b><span class="koboSpan" id="kobo.458.1"> part of the </span><b><span class="koboSpan" id="kobo.459.1">if</span></b><span class="koboSpan" id="kobo.460.1"> statement are run. </span><span class="koboSpan" id="kobo.460.2">This calls the same </span><b><span class="koboSpan" id="kobo.461.1">flash</span></b><span class="koboSpan" id="kobo.462.1"> function but with a much longer delay, making the LED blink slowly.</span></span></div>
<div class="indent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.463.1">The </span><b><span class="koboSpan" id="kobo.464.1">flash</span></b><span class="koboSpan" id="kobo.465.1"> function is a simplified version of the </span><b><span class="koboSpan" id="kobo.466.1">flash</span></b><span class="koboSpan" id="kobo.467.1"> function that you used in the previous sketch, and it just blinks once with the period specified.</span></span></div>
<div class="indent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.468.1">Sometimes you will connect digital outputs from a module that does not act as a switch, but actually produces an output that is either HIGH or LOW. </span><span class="koboSpan" id="kobo.468.2">In this case, you can use </span><b><span class="koboSpan" id="kobo.469.1">INPUT</span></b><span class="koboSpan" id="kobo.470.1"> rather than </span><b><span class="koboSpan" id="kobo.471.1">INPUT_PULLUP</span></b><span class="koboSpan" id="kobo.472.1"> in the </span><b><span class="koboSpan" id="kobo.473.1">pinMode</span></b><span class="koboSpan" id="kobo.474.1"> function.</span></span></div>
<div class="image2" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.475.1"><img width="100%" alt="image" src="images/line2.jpg" xmlns="http://www.w3.org/1999/xhtml"></img></span></span></div>
<div id="c1-23" class="head" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.476.1">Digital Outputs</span></span></div>
<div class="noindent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.477.1">There is not really much new to say about digital outputs from a programming point of view, as you have already used them with the built-in LED on pin 13.</span></span></div>
<div class="indent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.478.1">The essence of a digital output is that in your </span><b><span class="koboSpan" id="kobo.479.1">setup</span></b><span class="koboSpan" id="kobo.480.1"> function you define them as being an output using this command:</span></span></div>
<div class="image3" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.481.1"><img alt="image" src="images/p24-01.jpg" xmlns="http://www.w3.org/1999/xhtml"></img></span></span></div>
<div class="indent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.482.1">When you want to set the output </span><b><span class="koboSpan" id="kobo.483.1">HIGH</span></b><span class="koboSpan" id="kobo.484.1"> or </span><b><span class="koboSpan" id="kobo.485.1">LOW</span></b><span class="koboSpan" id="kobo.486.1">, you use the </span><b><span class="koboSpan" id="kobo.487.1">digitalWrite</span></b><span class="koboSpan" id="kobo.488.1"> command:</span></span></div>
<div class="image3" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.489.1"><img alt="image" src="images/p24-02.jpg" xmlns="http://www.w3.org/1999/xhtml"></img></span></span></div>
<div class="image2" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.490.1"><img width="100%" alt="image" src="images/line2.jpg" xmlns="http://www.w3.org/1999/xhtml"></img></span></span></div>
<div id="c1-24" class="head" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.491.1">The Serial Monitor</span></span></div>
<div class="noindent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.492.1">Because your Arduino is connected to your computer by USB, you can send messages between the two using a feature of the Arduino IDE called the </span><i><span class="koboSpan" id="kobo.493.1">Serial Monitor</span></i><span class="koboSpan" id="kobo.494.1">.</span></span></div>
<div class="indent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.495.1">To illustrate, let’s modify the sketch 01_03 so that, instead of changing the LED blink rate when digital input 7 is LOW, it sends a message.</span></span></div>
<div class="indent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.496.1">Load this sketch:</span></span></div>
<div class="image3" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.497.1"><img alt="image" src="images/p25-01.jpg" xmlns="http://www.w3.org/1999/xhtml"></img></span></span></div>
<div class="indent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.498.1">Now open the Serial Monitor on the Arduino IDE by clicking the icon that looks like a magnifying glass on the toolbar. </span><span class="koboSpan" id="kobo.498.2">You should immediately start to see some messages appear, once each second (</span><a href="#fig1-14"><span class="koboSpan" id="kobo.499.1">Figure 1-14</span></a><span class="koboSpan" id="kobo.500.1">).</span></span></div>
<div class="break" xmlns="http://www.w3.org/1999/xhtml">
<div id="fig1-14" class="image"><span><span class="koboSpan" id="kobo.501.1"><img alt="image" src="images/fig1-14.jpg" xmlns="http://www.w3.org/1999/xhtml"></img></span></span></div>
<div class="caption"><span><b><span class="koboSpan" id="kobo.502.1">Figure 1-14</span></b><span class="koboSpan" id="kobo.503.1">   </span><i><span class="koboSpan" id="kobo.504.1">The Serial Monitor</span></i></span></div>
</div>
<div class="indent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.505.1">Disconnect one end of the paperclip, and you should see the message change.</span></span></div>
<div class="indent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.506.1">Because you are no longer using the built-in LED, you do not need the </span><b><span class="koboSpan" id="kobo.507.1">ledPin</span></b><span class="koboSpan" id="kobo.508.1"> variable any more. </span><span class="koboSpan" id="kobo.508.2">Instead, you need to use the </span><b><span class="koboSpan" id="kobo.509.1">Serial.begin</span></b><span class="koboSpan" id="kobo.510.1"> command to start serial communications. </span><span class="koboSpan" id="kobo.510.2">The parameter is the baud rate. </span><span class="koboSpan" id="kobo.510.3">In </span><a href="ch13.html"><span class="koboSpan" id="kobo.511.1">Chapter 13</span></a><span class="koboSpan" id="kobo.512.1">, you will find out much more about serial communications.</span></span></div>
<div class="indent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.513.1">To write messages to the Serial Monitor, all you need to do is use the </span><b><span class="koboSpan" id="kobo.514.1">Serial.println</span></b><span class="koboSpan" id="kobo.515.1"> command.</span></span></div>
<div class="indent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.516.1">In this example, the Arduino is sending messages to the Serial Monitor.</span></span></div>
<div class="image2" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.517.1"><img width="100%" alt="image" src="images/line2.jpg" xmlns="http://www.w3.org/1999/xhtml"></img></span></span></div>
<div id="c1-25" class="head" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.518.1">Arrays and Strings</span></span></div>
<div class="noindent" xmlns="http://www.w3.org/1999/xhtml"><span><i><span class="koboSpan" id="kobo.519.1">Arrays</span></i><span class="koboSpan" id="kobo.520.1"> are a way of containing a list of values. </span><span class="koboSpan" id="kobo.520.2">The variables you have met so far have only contained a single value, usually an </span><b><span class="koboSpan" id="kobo.521.1">int</span></b><span class="koboSpan" id="kobo.522.1">. </span><span class="koboSpan" id="kobo.522.2">By contrast, an array contains a list of values, and you can access any one of those values by its position in the list.</span></span></div>
<div class="indent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.523.1">C, in common with most programming languages, begins its index positions at 0 rather than 1. </span><span class="koboSpan" id="kobo.523.2">This means that the first element is actually element zero.</span></span></div>
<div class="indent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.524.1">You have already met one kind of array in the last section when you learned about the Serial Monitor. </span><span class="koboSpan" id="kobo.524.2">Messages like </span><b><span class="koboSpan" id="kobo.525.1">&quot;Paperclip NOT connected&quot;</span></b><span class="koboSpan" id="kobo.526.1"> are called </span><i><span class="koboSpan" id="kobo.527.1">character arrays</span></i><span class="koboSpan" id="kobo.528.1"> because they are essentially collections of characters.</span></span></div>
<div class="indent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.529.1">For example, let’s teach Arduino to talk gibberish over the Serial Monitor.</span></span></div>
<div class="indent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.530.1">The following sketch has an array of character arrays and will pick one at random and display it on the Serial Monitor after a random amount of time. </span><span class="koboSpan" id="kobo.530.2">This sketch has the added advantage of showing you how to produce random numbers with an Arduino.</span></span></div>
<div class="image3" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.531.1"><img alt="image" src="images/p27-01.jpg" xmlns="http://www.w3.org/1999/xhtml"></img></span></span></div>
<div class="indent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.532.1">Each of the messages, or </span><i><span class="koboSpan" id="kobo.533.1">strings</span></i><span class="koboSpan" id="kobo.534.1"> as collections of characters are often called, has a data type of </span><b><span class="koboSpan" id="kobo.535.1">char*</span></b><span class="koboSpan" id="kobo.536.1">. </span><span class="koboSpan" id="kobo.536.2">The </span><b><span class="koboSpan" id="kobo.537.1">*</span></b><span class="koboSpan" id="kobo.538.1"> is a pointer to something. </span><span class="koboSpan" id="kobo.538.2">We’ll get to the advanced topic of pointers in </span><a href="ch06.html"><span class="koboSpan" id="kobo.539.1">Chapter 6</span></a><span class="koboSpan" id="kobo.540.1">. </span><span class="koboSpan" id="kobo.540.2">The </span><b><span class="koboSpan" id="kobo.541.1">[]</span></b><span class="koboSpan" id="kobo.542.1"> on the end of the variable declaration indicates that the variable is an array of </span><b><span class="koboSpan" id="kobo.543.1">char*</span></b><span class="koboSpan" id="kobo.544.1"> rather than just a single </span><b><span class="koboSpan" id="kobo.545.1">char*</span></b><span class="koboSpan" id="kobo.546.1"> on its own.</span></span></div>
<div class="indent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.547.1">Inside the </span><b><span class="koboSpan" id="kobo.548.1">loop</span></b><span class="koboSpan" id="kobo.549.1"> function, the value </span><b><span class="koboSpan" id="kobo.550.1">delayPeriod</span></b><span class="koboSpan" id="kobo.551.1"> is assigned a random value between </span><b><span class="koboSpan" id="kobo.552.1">2000</span></b><span class="koboSpan" id="kobo.553.1"> and </span><b><span class="koboSpan" id="kobo.554.1">7999</span></b><span class="koboSpan" id="kobo.555.1"> (the second argument to “random” is exclusive). </span><span class="koboSpan" id="kobo.555.2">A pause of this length is then set using the </span><b><span class="koboSpan" id="kobo.556.1">delay</span></b><span class="koboSpan" id="kobo.557.1"> function.</span></span></div>
<div class="indent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.558.1">The </span><b><span class="koboSpan" id="kobo.559.1">messageIndex</span></b><span class="koboSpan" id="kobo.560.1"> variable is also assigned a random value using </span><b><span class="koboSpan" id="kobo.561.1">random</span></b><span class="koboSpan" id="kobo.562.1">, but this time </span><b><span class="koboSpan" id="kobo.563.1">random</span></b><span class="koboSpan" id="kobo.564.1"> is only given one parameter, in which case a random number between 0 and 3 is generated as the index for the message to be displayed.</span></span></div>
<div class="indent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.565.1">Finally, the message at that position is sent to the Serial Monitor. </span><span class="koboSpan" id="kobo.565.2">Try out the sketch, remembering to open the Serial Monitor.</span></span></div>
<div class="image2" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.566.1"><img width="100%" alt="image" src="images/line2.jpg" xmlns="http://www.w3.org/1999/xhtml"></img></span></span></div>
<div id="c1-26" class="head" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.567.1">Analog Inputs</span></span></div>
<div class="noindent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.568.1">The Arduino pins labeled A0 to A5 can measure the voltage applied to them. </span><span class="koboSpan" id="kobo.568.2">The voltage must be between 0 and 5V. </span><span class="koboSpan" id="kobo.568.3">The built-in Arduino function that does this is </span><b><span class="koboSpan" id="kobo.569.1">analogRead</span></b><span class="koboSpan" id="kobo.570.1">, and it returns a value between 0 and 1023: 0 at 0V and 1023 at 5V. </span><span class="koboSpan" id="kobo.570.2">So to convert that number into a value between 0 and 5, you have to divide 1023/5 = 204.6.</span></span></div>
<div class="indent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.571.1">To measure voltage, </span><b><span class="koboSpan" id="kobo.572.1">int</span></b><span class="koboSpan" id="kobo.573.1"> is not the ideal data type as it only represents whole numbers and it would be good to see the fractional voltage, for which you need to use the </span><b><span class="koboSpan" id="kobo.574.1">float</span></b><span class="koboSpan" id="kobo.575.1"> data type.</span></span></div>
<div class="indent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.576.1">Load this sketch onto your Arduino and then attach the paperclip between A0 and 3.3V (</span><a href="#fig1-15"><span class="koboSpan" id="kobo.577.1">Figure 1-15</span></a><span class="koboSpan" id="kobo.578.1">).</span></span></div>
<div class="break" xmlns="http://www.w3.org/1999/xhtml">
<div id="fig1-15" class="image"><span><span class="koboSpan" id="kobo.579.1"><img alt="image" src="images/fig1-15.jpg" xmlns="http://www.w3.org/1999/xhtml"></img></span></span></div>
<div class="caption"><span><b><span class="koboSpan" id="kobo.580.1">Figure 1-15</span></b><span class="koboSpan" id="kobo.581.1">   </span><i><span class="koboSpan" id="kobo.582.1">Connecting 3.3V to A0</span></i></span></div>
</div>
<div class="image3" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.583.1"><img alt="image" src="images/p29-01.jpg" xmlns="http://www.w3.org/1999/xhtml"></img></span></span></div>
<div class="indent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.584.1">Open the Serial Monitor, and a stream of numbers should appear (</span><a href="#fig1-16"><span class="koboSpan" id="kobo.585.1">Figure 1-16</span></a><span class="koboSpan" id="kobo.586.1">). </span><span class="koboSpan" id="kobo.586.2">These should be close to 3.3.</span></span></div>
<div class="break" xmlns="http://www.w3.org/1999/xhtml">
<div id="fig1-16" class="image"><span><span class="koboSpan" id="kobo.587.1"><img alt="image" src="images/fig1-16.jpg" xmlns="http://www.w3.org/1999/xhtml"></img></span></span></div>
<div class="caption"><span><b><span class="koboSpan" id="kobo.588.1">Figure 1-16</span></b><span class="koboSpan" id="kobo.589.1">   </span><i><span class="koboSpan" id="kobo.590.1">Voltage readings</span></i></span></div>
</div>
<div class="note" xmlns="http://www.w3.org/1999/xhtml"><span><b><i><span class="koboSpan" id="kobo.591.1">CAUTION</span></i></b><span class="koboSpan" id="kobo.592.1">   </span><i><span class="koboSpan" id="kobo.593.1">Do not connect any of the supply voltages together (5V, 3.3V, or GND). </span><span class="koboSpan" id="kobo.593.2">Creating such a short circuit would probably damage your Arduino and could even damage your computer</span></i><span class="koboSpan" id="kobo.594.1">.</span></span></div>
<div class="indent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.595.1">If you now keep one end of the paperclip in A0 but move the other end of the paperclip to 5V, the readings will change to around 5V. </span><span class="koboSpan" id="kobo.595.2">Moving the same end to GND gives you a reading of 0V.</span></span></div>
<div class="image2" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.596.1"><img width="100%" alt="image" src="images/line2.jpg" xmlns="http://www.w3.org/1999/xhtml"></img></span></span></div>
<div id="c1-27" class="head" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.597.1">Analog Outputs</span></span></div>
<div class="noindent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.598.1">The Arduino Uno does not produce true analog outputs (for that you need an Arduino Due), but it does have a number of outputs that are capable of producing a pulse-width modulation (PWM) output. </span><span class="koboSpan" id="kobo.598.2">This approximates to an analog output by controlling the length of a stream of pulses, as you can see in </span><a href="#fig1-17"><span class="koboSpan" id="kobo.599.1">Figure 1-17</span></a><span class="koboSpan" id="kobo.600.1">.</span></span></div>
<div class="break" xmlns="http://www.w3.org/1999/xhtml">
<div id="fig1-17" class="image"><span><span class="koboSpan" id="kobo.601.1"><img alt="image" src="images/fig1-17.jpg" xmlns="http://www.w3.org/1999/xhtml"></img></span></span></div>
<div class="caption"><span><b><span class="koboSpan" id="kobo.602.1">Figure 1-17</span></b><span class="koboSpan" id="kobo.603.1">   </span><i><span class="koboSpan" id="kobo.604.1">Pulse-width modulation</span></i></span></div>
</div>
<div class="indent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.605.1">The longer the pulse is high, the higher the average voltage of the signal. </span><span class="koboSpan" id="kobo.605.2">Since there are about 600 pulses per second and most things that you would connect to a PWM output are quite slow to react, the effect is of the voltage changing.</span></span></div>
<div class="indent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.606.1">On an Arduino Uno, the pins marked with a little </span><b><span class="koboSpan" id="kobo.607.1">~</span></b><span class="koboSpan" id="kobo.608.1"> (pins 3, 5, 6, 9, 10, and 11) can be used as analog outputs.</span></span></div>
<div class="indent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.609.1">If you have a voltmeter, set it to its 0..20V DC range and attach the positive lead to digital pin 6 and the negative lead to GND (</span><a href="#fig1-18"><span class="koboSpan" id="kobo.610.1">Figure 1-18</span></a><span class="koboSpan" id="kobo.611.1">). </span><span class="koboSpan" id="kobo.611.2">Then load the following sketch:</span></span></div>
<div class="break" xmlns="http://www.w3.org/1999/xhtml">
<div id="fig1-18" class="image"><span><span class="koboSpan" id="kobo.612.1"><img alt="image" src="images/fig1-18.jpg" xmlns="http://www.w3.org/1999/xhtml"></img></span></span></div>
<div class="caption"><span><b><span class="koboSpan" id="kobo.613.1">Figure 1-18</span></b><span class="koboSpan" id="kobo.614.1">   </span><i><span class="koboSpan" id="kobo.615.1">Measuring the output voltage</span></i></span></div>
</div>
<div class="image3" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.616.1"><img alt="image" src="images/p31-01.jpg" xmlns="http://www.w3.org/1999/xhtml"></img></span></span></div>
<div class="indent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.617.1">Open the Serial Monitor and type a number between 0 and 255 into the text entry field at the top of the screen next to the Send button. </span><span class="koboSpan" id="kobo.617.2">Then press Send and you should see the voltage change on your multimeter. </span><span class="koboSpan" id="kobo.617.3">Sending a value of 0 should give a voltage of around 0. </span><span class="koboSpan" id="kobo.617.4">A value of 127 should be about halfway between 0 and 5V (2.5V) and a value of 255 should give a value near 5V.</span></span></div>
<div class="indent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.618.1">In this sketch, the </span><b><span class="koboSpan" id="kobo.619.1">loop</span></b><span class="koboSpan" id="kobo.620.1"> function starts with an </span><b><span class="koboSpan" id="kobo.621.1">if</span></b><span class="koboSpan" id="kobo.622.1"> statement. </span><span class="koboSpan" id="kobo.622.2">The condition for the </span><b><span class="koboSpan" id="kobo.623.1">if</span></b><span class="koboSpan" id="kobo.624.1"> is </span><b><span class="koboSpan" id="kobo.625.1">Serial.available()</span></b><span class="koboSpan" id="kobo.626.1">. </span><span class="koboSpan" id="kobo.626.2">This means if a message is waiting from the Serial Monitor, the commands inside the curly braces will run. </span><span class="koboSpan" id="kobo.626.3">In this case, the </span><b><span class="koboSpan" id="kobo.627.1">Serial.parseInt</span></b><span class="koboSpan" id="kobo.628.1"> command converts the message that you typed into the Serial Monitor into an </span><b><span class="koboSpan" id="kobo.629.1">int</span></b><span class="koboSpan" id="kobo.630.1">, which is then used as the argument to </span><b><span class="koboSpan" id="kobo.631.1">analogWrite</span></b><span class="koboSpan" id="kobo.632.1"> to set the PWM output.</span></span></div>
<div class="image2" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.633.1"><img width="100%" alt="image" src="images/line2.jpg" xmlns="http://www.w3.org/1999/xhtml"></img></span></span></div>
<div id="c1-28" class="head" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.634.1">Using Libraries</span></span></div>
<div class="noindent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.635.1">Because Arduino boards have a quite limited amount of memory, you’ll find it worthwhile to only include code that will actually be used in what ends up on the board. </span><span class="koboSpan" id="kobo.635.2">One way to achieve this is by using libraries. </span><span class="koboSpan" id="kobo.635.3">In Arduino, and for that matter in C in general, a </span><i><span class="koboSpan" id="kobo.636.1">library</span></i><span class="koboSpan" id="kobo.637.1"> is a collection of useful functions.</span></span></div>
<div class="indent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.638.1">So, for example, the Arduino IDE includes a library for using an LCD display. </span><span class="koboSpan" id="kobo.638.2">This uses about 1.5kB of program memory. </span><span class="koboSpan" id="kobo.638.3">There is no point in this library being included unless you are using it, so such libraries are “included” when needed.</span></span></div>
<div class="indent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.639.1">You accomplish this using the </span><b><span class="koboSpan" id="kobo.640.1">#include</span></b><span class="koboSpan" id="kobo.641.1"> directive at the beginning of your sketch. </span><span class="koboSpan" id="kobo.641.2">You can add an </span><b><span class="koboSpan" id="kobo.642.1">include</span></b><span class="koboSpan" id="kobo.643.1"> statement for any libraries that the Arduino IDE has installed using the Sketch | Import Library… menu option.</span></span></div>
<div class="indent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.644.1">The Arduino IDE comes with a large selection of “official” libraries, including:</span></span></div>
<div class="hangbull" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.645.1">•  </span><b><span class="koboSpan" id="kobo.646.1">EEPROM</span></b><span class="koboSpan" id="kobo.647.1">   For storing data in EEPROM memory</span></span></div>
<div class="hangbull" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.648.1">•  </span><b><span class="koboSpan" id="kobo.649.1">Ethernet</span></b><span class="koboSpan" id="kobo.650.1">   For network programming</span></span></div>
<div class="hangbull" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.651.1">•  </span><b><span class="koboSpan" id="kobo.652.1">Firmata</span></b><span class="koboSpan" id="kobo.653.1">   The serial communications standard for Arduino to computer</span></span></div>
<div class="hangbull" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.654.1">•  </span><b><span class="koboSpan" id="kobo.655.1">LiquidCrystal</span></b><span class="koboSpan" id="kobo.656.1">   For alphanumeric LCD displays</span></span></div>
<div class="hangbull" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.657.1">•  </span><b><span class="koboSpan" id="kobo.658.1">SD</span></b><span class="koboSpan" id="kobo.659.1">   For reading and writing SD flash memory cards</span></span></div>
<div class="hangbull" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.660.1">•  </span><b><span class="koboSpan" id="kobo.661.1">Servo</span></b><span class="koboSpan" id="kobo.662.1">   For controlling servo motors</span></span></div>
<div class="hangbull" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.663.1">•  </span><b><span class="koboSpan" id="kobo.664.1">SPI</span></b><span class="koboSpan" id="kobo.665.1">   The Arduino to peripheral communication bus</span></span></div>
<div class="hangbull" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.666.1">•  </span><b><span class="koboSpan" id="kobo.667.1">Software Serial</span></b><span class="koboSpan" id="kobo.668.1">   For serial communication using nonserial pins</span></span></div>
<div class="hangbull" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.669.1">•  </span><b><span class="koboSpan" id="kobo.670.1">Stepper</span></b><span class="koboSpan" id="kobo.671.1">   For controlling stepper motors</span></span></div>
<div class="hangbull" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.672.1">•  </span><b><span class="koboSpan" id="kobo.673.1">WiFi</span></b><span class="koboSpan" id="kobo.674.1">   For WiFi network access</span></span></div>
<div class="hangbull" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.675.1">•  </span><b><span class="koboSpan" id="kobo.676.1">Wire</span></b><span class="koboSpan" id="kobo.677.1">   For I2C communication with peripherals</span></span></div>
<div class="indent1" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.678.1">Some libraries are specific to a type of Arduino board:</span></span></div>
<div class="hangbull" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.679.1">•  </span><b><span class="koboSpan" id="kobo.680.1">Keyboard</span></b><span class="koboSpan" id="kobo.681.1">   USB keyboard emulation (Leonardo, Due, and Micro)</span></span></div>
<div class="hangbull" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.682.1">•  </span><b><span class="koboSpan" id="kobo.683.1">Mouse</span></b><span class="koboSpan" id="kobo.684.1">   USB mouse emulation (Leonardo, Due, and Micro)</span></span></div>
<div class="hangbull" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.685.1">•  </span><b><span class="koboSpan" id="kobo.686.1">Audio</span></b><span class="koboSpan" id="kobo.687.1">   Audio playing utilities (Due only)</span></span></div>
<div class="hangbull" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.688.1">•  </span><b><span class="koboSpan" id="kobo.689.1">Scheduler</span></b><span class="koboSpan" id="kobo.690.1">   For managing multiple execution threads (Due only)</span></span></div>
<div class="hangbull" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.691.1">•  </span><b><span class="koboSpan" id="kobo.692.1">USBHost</span></b><span class="koboSpan" id="kobo.693.1">   USB peripherals (Due only)</span></span></div>
<div class="indent1" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.694.1">Finally, there are a huge number of libraries that other Arduino users have written that can be downloaded from the Internet. </span><span class="koboSpan" id="kobo.694.2">Some of the more popular ones are</span></span></div>
<div class="hangbull" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.695.1">•  </span><b><span class="koboSpan" id="kobo.696.1">OneWire</span></b><span class="koboSpan" id="kobo.697.1">   For reading data from Dallas Semiconductor’s range of digital devices using the 1-wire bus interface</span></span></div>
<div class="hangbull" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.698.1">•  </span><b><span class="koboSpan" id="kobo.699.1">Xbee</span></b><span class="koboSpan" id="kobo.700.1">   For Wireless serial communication</span></span></div>
<div class="hangbull" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.701.1">•  </span><b><span class="koboSpan" id="kobo.702.1">GFX</span></b><span class="koboSpan" id="kobo.703.1">   A graphics library for many different types of display from Adafruit</span></span></div>
<div class="hangbull" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.704.1">•  </span><b><span class="koboSpan" id="kobo.705.1">Capacitive Sensing</span></b><span class="koboSpan" id="kobo.706.1">   For proximity detection</span></span></div>
<div class="hangbull" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.707.1">•  </span><b><span class="koboSpan" id="kobo.708.1">FFT</span></b><span class="koboSpan" id="kobo.709.1">   Frequency analysis library</span></span></div>
<div class="indent1" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.710.1">New libraries appear all the time and you may find them on the official Arduino site (</span><a href="http://arduino.cc/en/Reference/Libraries"><span class="koboSpan" id="kobo.711.1">http://arduino.cc/en/Reference/Libraries</span></a><span class="koboSpan" id="kobo.712.1">) or you may find them with an Internet search.</span></span></div>
<div class="indent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.713.1">If you want to use one of these last categories of libraries, then you need to install it by downloading the library and then saving it to the Libraries folder within your Arduino folder (in your Documents folder). </span><span class="koboSpan" id="kobo.713.2">Note that if there is no Libraries folder, you will need to create it the first time that you add a library.</span></span></div>
<div class="indent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.714.1">For the Arduino IDE to become aware of a library that you have installed, you need to exit and restart the IDE.</span></span></div>
<div class="image2" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.715.1"><img width="100%" alt="image" src="images/line2.jpg" xmlns="http://www.w3.org/1999/xhtml"></img></span></span></div>
<div id="c1-29" class="head" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.716.1">Arduino Data Types</span></span></div>
<div class="noindent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.717.1">A variable of type </span><b><span class="koboSpan" id="kobo.718.1">int</span></b><span class="koboSpan" id="kobo.719.1"> in Arduino C uses 2 bytes of data. </span><span class="koboSpan" id="kobo.719.2">Unless a sketch becomes very memory hungry, then </span><b><span class="koboSpan" id="kobo.720.1">int</span></b><span class="koboSpan" id="kobo.721.1">s tend to be used for almost everything, even for Boolean values and small integers that could easily be represented in a single byte value.</span></span></div>
<div class="indent" xmlns="http://www.w3.org/1999/xhtml"><span><a href="#tab1-1"><span class="koboSpan" id="kobo.722.1">Table 1-1</span></a><span class="koboSpan" id="kobo.723.1"> contains a full list of the data types available.</span></span></div>
<div class="break" xmlns="http://www.w3.org/1999/xhtml">
<div id="tab1-1" class="imagex"><span><span class="koboSpan" id="kobo.724.1"><img alt="image" src="images/tab1-1.jpg" xmlns="http://www.w3.org/1999/xhtml"></img></span></span></div>
<div class="caption"><span><b><span class="koboSpan" id="kobo.725.1">Table 1-1</span></b><span class="koboSpan" id="kobo.726.1">   </span><i><span class="koboSpan" id="kobo.727.1">Data Types in Arduino C</span></i></span></div>
</div>
<div class="image2" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.728.1"><img width="100%" alt="image" src="images/line2.jpg" xmlns="http://www.w3.org/1999/xhtml"></img></span></span></div>
<div id="c1-30" class="head" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.729.1">Arduino Commands</span></span></div>
<div class="noindent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.730.1">A large number of commands are available in the Arduino library, and a selection of the most commonly used commands is listed, along with examples, in </span><a href="#tab1-2"><span class="koboSpan" id="kobo.731.1">Table 1-2</span></a><span class="koboSpan" id="kobo.732.1">.</span></span></div>
<div id="tab1-2" class="image" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.733.1"><img alt="image" src="images/tab1-2.jpg" xmlns="http://www.w3.org/1999/xhtml"></img></span></span></div>
<div class="break" xmlns="http://www.w3.org/1999/xhtml">
<div class="image"><span><span class="koboSpan" id="kobo.734.1"><img alt="image" src="images/tab1-2a.jpg" xmlns="http://www.w3.org/1999/xhtml"></img></span></span></div>
<div class="caption"><span><b><span class="koboSpan" id="kobo.735.1">Table 1-2</span></b><span class="koboSpan" id="kobo.736.1">   </span><i><span class="koboSpan" id="kobo.737.1">Arduino Library Functions</span></i></span></div>
</div>
<div class="indent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.738.1">For a full reference to all the Arduino commands, see the official Arduino documentation at </span><a href="http://arduino.cc"><span class="koboSpan" id="kobo.739.1">http://arduino.cc</span></a><span class="koboSpan" id="kobo.740.1">.</span></span></div>
<div class="image2" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.741.1"><img width="100%" alt="image" src="images/line2.jpg" xmlns="http://www.w3.org/1999/xhtml"></img></span></span></div>
<div id="c1-31" class="head" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.742.1">Summary</span></span></div>
<div class="noindent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.743.1">By necessity, this chapter has been a very condensed introduction to the world of Arduino. </span><span class="koboSpan" id="kobo.743.2">If you require more information about the basics, then there are many online resources, including free Arduino tutorials at </span><a href="http://www.learn.adafruit.com"><span class="koboSpan" id="kobo.744.1">http://www.learn.adafruit.com</span></a><span class="koboSpan" id="kobo.745.1">.</span></span></div>
<div class="indent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.746.1">In the next chapter, we will dig under the surface of Arduino and see just how it works and what is going on inside the nice, easy-to-use Arduino environment.</span></span></div>
</div></div></body>
</html>