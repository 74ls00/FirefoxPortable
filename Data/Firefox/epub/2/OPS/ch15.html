<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.1//EN' 'http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd'>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Programming Arduino™ Next Steps: Going Further with Sketches</title>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"></meta>
<link href="stylesheet.css" type="text/css" rel="stylesheet"></link>

<!-- kobo-style -->
<link type="text/css" rel="stylesheet" href="css/kobo.css"></link>
<script type="text/javascript" src="js/kobo.js"></script>
<style type="text/css" id="kobostylehacks">div#book-inner p, div#book-inner div { font-size: 1.0em; } a { color: black; } a:link, a:visited, a:hover, a:active { color: blue; } div#book-inner * { margin-top: 0 !important; margin-bottom: 0 !important;}</style>
</head>
<body><div id="book-columns"><div id="book-inner">
<div class="chapnum" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.1.1">15</span></span></div>
<div class="chaptitle" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.2.1">Writing Libraries</span></span></div>
<div class="noindent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="big"><span class="koboSpan" id="kobo.3.1">Sooner or</span></span><span class="koboSpan" id="kobo.4.1"> later you will create something really good that you think other people could make use of. </span><span class="koboSpan" id="kobo.4.2">This is the time to wrap up the code in a library and release it to the world. </span><span class="koboSpan" id="kobo.4.3">This chapter shows you how.</span></span></div>
<div class="image2" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.5.1"><img width="100%" alt="image" src="images/line2.jpg" xmlns="http://www.w3.org/1999/xhtml"></img></span></span></div>
<div id="c15-1" class="head" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.6.1">When to Make a Library</span></span></div>
<div class="noindent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.7.1">Creating an Arduino library is not an activity restricted to Arduino developers; any Arduino user can create a library. </span><span class="koboSpan" id="kobo.7.2">If it’s useful, then much praise will flow in the developer’s direction. </span><span class="koboSpan" id="kobo.7.3">No one sells libraries—that would be counter to the values of the Arduino community. </span><span class="koboSpan" id="kobo.7.4">Libraries should be released as open source as a way to help your fellow Arduino enthusiasts.</span></span></div>
<div class="indent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.8.1">Perhaps the most useful Arduino libraries are those that are developed to provide an interface to a specific piece of hardware. </span><span class="koboSpan" id="kobo.8.2">They often greatly simplify the process of using the hardware and, in particular, unraveling some complex protocol. </span><span class="koboSpan" id="kobo.8.3">There is no reason why more than one person should have to go through the pain of working out how some obscure bit of hardware works, and thanks to the Internet, if you publish a helpful library, people will generally find it.</span></span></div>
<div class="note" xmlns="http://www.w3.org/1999/xhtml"><span><b><i><span class="koboSpan" id="kobo.9.1">TIP</span></i></b><span class="koboSpan" id="kobo.10.1">   </span><i><span class="koboSpan" id="kobo.11.1">The application programmer interface (API) is the set of functions that the library user will include in his or her sketch. </span><span class="koboSpan" id="kobo.11.2">When designing the API, always ask yourself this question: “What does the user actually care about?” </span><span class="koboSpan" id="kobo.11.3">The low-level implementation details should be hidden as much as possible. </span><span class="koboSpan" id="kobo.11.4">In the example developed in “Library Example (TEA5767 Radio),” I’ll discuss this issue further</span></i><span class="koboSpan" id="kobo.12.1">.</span></span></div>
<div class="image2" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.13.1"><img width="100%" alt="image" src="images/line2.jpg" xmlns="http://www.w3.org/1999/xhtml"></img></span></span></div>
<div id="c15-2" class="head" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.14.1">Using Classes and Methods</span></span></div>
<div class="noindent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.15.1">Although the sketch writer generally has the impression that he or she is writing in C and using a fairly conservative set of C features, in actual fact, the sketch writer is using C++. </span><span class="koboSpan" id="kobo.15.2">Arduino sketches are based on C++, the object-oriented extension to the C language. </span><span class="koboSpan" id="kobo.15.3">This language uses the concepts of </span><i><span class="koboSpan" id="kobo.16.1">classes</span></i><span class="koboSpan" id="kobo.17.1"> of objects that group together information about the object (its data) and also functions that apply to the data. </span><span class="koboSpan" id="kobo.17.2">These functions look like regular functions but when associated with a particular class are referred to as </span><i><span class="koboSpan" id="kobo.18.1">methods</span></i><span class="koboSpan" id="kobo.19.1">. </span><span class="koboSpan" id="kobo.19.2">What is more, methods can be declared to be public, in which case anyone can use them, or private, in which case they are only accessible to other methods inside the class.</span></span></div>
<div class="indent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.20.1">The reason I am telling you all this is that extension writing is one of the few Arduino activities in which using classes is the norm. </span><span class="koboSpan" id="kobo.20.2">The class is a great way to wrap up everything into a kind of module. </span><span class="koboSpan" id="kobo.20.3">The “private”/“public” distinction is also a good way to ensure that when you are designing the API, you are always thinking of how the sketch writer will want to interact with the library (the public) rather than how it works (the private).</span></span></div>
<div class="indent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.21.1">As you work through the example that follows, you’ll see how to use a class.</span></span></div>
<div class="image2" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.22.1"><img width="100%" alt="image" src="images/line2.jpg" xmlns="http://www.w3.org/1999/xhtml"></img></span></span></div>
<div id="c15-3" class="head" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.23.1">Library Example (TEA5767 Radio)</span></span></div>
<div class="noindent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.24.1">To illustrate how to write an Arduino Library, I’ll wrap up some code that you first met back in </span><a href="ch07.html"><span class="koboSpan" id="kobo.25.1">Chapter 7</span></a><span class="koboSpan" id="kobo.26.1"> for the TEA5767 FM radio receiver. </span><span class="koboSpan" id="kobo.26.2">The sketch is simple and barely justifies a library, but nonetheless, it serves as a good example.</span></span></div>
<div class="indent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.27.1">The following are the stages in the process:</span></span></div>
<div class="numlist" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.28.1">1.  Define the API.</span></span></div>
<div class="numlist" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.29.1">2.  Write the header file.</span></span></div>
<div class="numlist" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.30.1">3.  Write the implementation file.</span></span></div>
<div class="numlist" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.31.1">4.  Write the keywords file.</span></span></div>
<div class="numlist" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.32.1">5.  Make some examples.</span></span></div>
<div class="indent1" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.33.1">In terms of files and folders, a library comprises a folder, whose name should match the name of the library class. </span><span class="koboSpan" id="kobo.33.2">In this case, I’ll call the library and class </span><b><span class="koboSpan" id="kobo.34.1">TEA5767Radio</span></b><span class="koboSpan" id="kobo.35.1">. </span><span class="koboSpan" id="kobo.35.2">Within that folder, there should be two files: </span><b><span class="koboSpan" id="kobo.36.1">TEA5767Radio.h</span></b><span class="koboSpan" id="kobo.37.1"> and </span><b><span class="koboSpan" id="kobo.38.1">TEA5767Radio.cpp</span></b><span class="koboSpan" id="kobo.39.1">.</span></span></div>
<div class="indent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.40.1">Optionally, you may also have a file named </span><b><span class="koboSpan" id="kobo.41.1">keywords.txt</span></b><span class="koboSpan" id="kobo.42.1"> and a folder called examples, containing example sketches that use the library. </span><span class="koboSpan" id="kobo.42.2">The folder structure for this example library is shown in </span><a href="#fig15-1"><span class="koboSpan" id="kobo.43.1">Figure 15-1</span></a><span class="koboSpan" id="kobo.44.1">.</span></span></div>
<div class="break" xmlns="http://www.w3.org/1999/xhtml">
<div id="fig15-1" class="image"><span><span class="koboSpan" id="kobo.45.1"><img alt="image" src="images/fig15-1.jpg" xmlns="http://www.w3.org/1999/xhtml"></img></span></span></div>
<div class="caption"><span><b><span class="koboSpan" id="kobo.46.1">Figure 15-1</span></b><span class="koboSpan" id="kobo.47.1">   </span><i><span class="koboSpan" id="kobo.48.1">Folder structure of the example project</span></i></span></div>
</div>
<div class="indent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.49.1">Probably the easiest way to work on the library is directly in your Arduino libraries folder, where you have been installing other third-party libraries. </span><span class="koboSpan" id="kobo.49.2">You can edit the files directly in this folder. </span><span class="koboSpan" id="kobo.49.3">The Arduino IDE will only register that the library exists once you restart it, but after that any changes to the contents of the files will be picked up automatically when you compile the project.</span></span></div>
<div class="indent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.50.1">You can see the original sketch on which this library is based in </span><b><span class="koboSpan" id="kobo.51.1">sketch_07_01_I2C_TEA5767</span></b><span class="koboSpan" id="kobo.52.1">, and you can download the finished library from </span><a href="http://playground.arduino.cc//Main/TEA5767Radio"><span class="koboSpan" id="kobo.53.1">http://playground.arduino.cc//Main/TEA5767Radio</span></a><span class="koboSpan" id="kobo.54.1">.</span></span></div>
<div id="c15-4" class="head1" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.55.1">Define the API</span></span></div>
<div class="noindent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.56.1">The first step is to define the interface that people will use.</span></span></div>
<div class="indent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.57.1">If you have used a few libraries, you’ve probably noticed that they generally follow one of two patterns. </span><span class="koboSpan" id="kobo.57.2">The simplest is exemplified by the Narcoleptic library. </span><span class="koboSpan" id="kobo.57.3">To use this library, you simply include the library and then access its methods by prefixing the method name with Narcoleptic, as shown here:</span></span></div>
<div class="image3" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.58.1"><img alt="image" src="images/p241-01.jpg" xmlns="http://www.w3.org/1999/xhtml"></img></span></span></div>
<div class="indent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.59.1">This pattern is also used in the Serial library. </span><span class="koboSpan" id="kobo.59.2">If there will only ever be one of the things that the library represents, then this pattern is the right one to use. </span><span class="koboSpan" id="kobo.59.3">However, if it is possible that there will be more than one, then you want to use a different approach. </span><span class="koboSpan" id="kobo.59.4">Because you might want to have more than one radio receiver attached to an Arduino at a time, this particular example falls into this second category.</span></span></div>
<div class="indent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.60.1">For these situations, the pattern is similar to that used in the Software-Serial library. </span><span class="koboSpan" id="kobo.60.2">Because you might have lots of soft-serial ports at the same time, you create named instances of the SoftwareSerial library using a syntax like this:</span></span></div>
<div class="image3" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.61.1"><img alt="image" src="images/p242-01.jpg" xmlns="http://www.w3.org/1999/xhtml"></img></span></span></div>
<div class="indent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.62.1">When you want to use that particular serial port (the one using pins 10 and 11), you create a name for it—in this instance, “mySerial”—and then you can then write things like the following:</span></span></div>
<div class="image3" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.63.1"><img alt="image" src="images/p242-02.jpg" xmlns="http://www.w3.org/1999/xhtml"></img></span></span></div>
<div class="indent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.64.1">Without worrying about how you will write the code, let’s define how you would like to be able to use the code in a sketch.</span></span></div>
<div class="indent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.65.1">After importing the library, you want to be able to create a new “radio,” name it, and specify which I2C address it runs on. </span><span class="koboSpan" id="kobo.65.2">To make life really easy, you have two options: one where it defaults to the normal port of 0x60 and a second where you specify the port:</span></span></div>
<div class="image3" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.66.1"><img alt="image" src="images/p242-03.jpg" xmlns="http://www.w3.org/1999/xhtml"></img></span></span></div>
<div class="indent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.67.1">Because this is an FM radio, what you really need to do is set the frequency, so you need to write something like this in your code.</span></span></div>
<div class="image3" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.68.1"><img alt="image" src="images/p242-04.jpg" xmlns="http://www.w3.org/1999/xhtml"></img></span></span></div>
<div class="noindent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.69.1">The number here is the frequency in MHz. </span><span class="koboSpan" id="kobo.69.2">It is in the form that the sketch writer would like it in, not in the strange unsigned </span><b><span class="koboSpan" id="kobo.70.1">int</span></b><span class="koboSpan" id="kobo.71.1"> format that is sent to the module. </span><span class="koboSpan" id="kobo.71.2">You want to hide the hard work and wrap it up in the library.</span></span></div>
<div class="indent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.72.1">That’s all there is to the design in this case. </span><span class="koboSpan" id="kobo.72.2">Now we’ll write some code.</span></span></div>
<div id="c15-5" class="head1" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.73.1">Write the Header File</span></span></div>
<div class="noindent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.74.1">The code for a library is split across more than one file—generally just two files. </span><span class="koboSpan" id="kobo.74.2">One file is called the “header” file and has the extension “.h.” </span><span class="koboSpan" id="kobo.74.3">This file is the one you reference from your sketch using </span><b><span class="koboSpan" id="kobo.75.1">#include</span></b><span class="koboSpan" id="kobo.76.1">. </span><span class="koboSpan" id="kobo.76.2">The header file does not contain any actual program code; it simply defines the names of the classes and methods in the library. </span><span class="koboSpan" id="kobo.76.3">Here is the header file for the example library:</span></span></div>
<div class="image3" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.77.1"><img alt="image" src="images/p243-01.jpg" xmlns="http://www.w3.org/1999/xhtml"></img></span></span></div>
<div class="noindent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.78.1">The </span><b><span class="koboSpan" id="kobo.79.1">#ifndef</span></b><span class="koboSpan" id="kobo.80.1"> command prevents the library from being imported more than once and is standard practice for header files.</span></span></div>
<div class="indent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.81.1">You then include the class definition, which has a private section just containing a variable called </span><b><span class="koboSpan" id="kobo.82.1">_address</span></b><span class="koboSpan" id="kobo.83.1">. </span><span class="koboSpan" id="kobo.83.2">This variable contains the I2C address for the device.</span></span></div>
<div class="indent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.84.1">The public section contains the two functions for creating a radio object—one that allows an address to be specified and one that does not and will, therefore, use the default. </span><span class="koboSpan" id="kobo.84.2">The </span><b><span class="koboSpan" id="kobo.85.1">setFrequncy</span></b><span class="koboSpan" id="kobo.86.1"> function is also listed as public.</span></span></div>
<div id="c15-6" class="head1" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.87.1">Write the Implementation File</span></span></div>
<div class="noindent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.88.1">The code that actually implements the functions defined in the header file is contained in the file </span><b><span class="koboSpan" id="kobo.89.1">TEA5767Radio.cpp</span></b><span class="koboSpan" id="kobo.90.1">:</span></span></div>
<div class="image3" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.91.1"><img alt="image" src="images/p243-02.jpg" xmlns="http://www.w3.org/1999/xhtml"></img></span></span></div>
<div class="image3" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.92.1"><img alt="image" src="images/p244-01.jpg" xmlns="http://www.w3.org/1999/xhtml"></img></span></span></div>
<div class="indent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.93.1">The two methods responsible for creating a new radio both simply set the value of </span><b><span class="koboSpan" id="kobo.94.1">_address</span></b><span class="koboSpan" id="kobo.95.1"> to either the default I2C address of 0x60 or the “address” parameter supplied. </span><span class="koboSpan" id="kobo.95.2">The </span><b><span class="koboSpan" id="kobo.96.1">setFrequency</span></b><span class="koboSpan" id="kobo.97.1"> method is almost identical to the original sketch (</span><b><span class="koboSpan" id="kobo.98.1">sketch_07_01_I2C_TEA5767</span></b><span class="koboSpan" id="kobo.99.1">), except that the following line uses the value of the </span><b><span class="koboSpan" id="kobo.100.1">_address</span></b><span class="koboSpan" id="kobo.101.1"> variable to make the I2C connection:</span></span></div>
<div class="image3" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.102.1"><img alt="image" src="images/p244-02.jpg" xmlns="http://www.w3.org/1999/xhtml"></img></span></span></div>
<div id="c15-7" class="head1" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.103.1">Write the Keywords File</span></span></div>
<div class="noindent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.104.1">The folder containing the library should also contain a file called </span><b><span class="koboSpan" id="kobo.105.1">keywords.txt</span></b><span class="koboSpan" id="kobo.106.1">. </span><span class="koboSpan" id="kobo.106.2">This file is not essential; the library will still work if you do not create this file. </span><span class="koboSpan" id="kobo.106.3">The file allows the Arduino IDE to color-code any keywords for the library. </span><span class="koboSpan" id="kobo.106.4">Our example library only has two keywords: the name of the library itself (</span><b><span class="koboSpan" id="kobo.107.1">TEA5767Radio</span></b><span class="koboSpan" id="kobo.108.1">) and </span><b><span class="koboSpan" id="kobo.109.1">setFrequency</span></b><span class="koboSpan" id="kobo.110.1">. </span><span class="koboSpan" id="kobo.110.2">The keyword file for the library can contain comments on lines that start with a </span><b><span class="koboSpan" id="kobo.111.1">#</span></b><span class="koboSpan" id="kobo.112.1">. </span><span class="koboSpan" id="kobo.112.2">The keyword file for this library is shown here:</span></span></div>
<div class="image3" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.113.1"><img alt="image" src="images/p245-01.jpg" xmlns="http://www.w3.org/1999/xhtml"></img></span></span></div>
<div class="indent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.114.1">The keywords should be specified as KEYWORD1 or KEYWORD2, although version 1.4 of the Arduino IDE colors both levels of keyword as orange.</span></span></div>
<div id="c15-8" class="head1" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.115.1">Make the Examples Folder</span></span></div>
<div class="noindent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.116.1">If you create a folder named </span><b><span class="koboSpan" id="kobo.117.1">examples</span></b><span class="koboSpan" id="kobo.118.1"> within the folder for the library, then any sketches in the folder will automatically be registered by the Arduino IDE when it starts, so you can access them from the </span><b><span class="koboSpan" id="kobo.119.1">Examples</span></b><span class="koboSpan" id="kobo.120.1"> menu under the name of the library. </span><span class="koboSpan" id="kobo.120.2">The examples sketch can just be a regular sketch, but one that is saved in the folder for the library. </span><span class="koboSpan" id="kobo.120.3">The example using this library is listed here:</span></span></div>
<div class="image3" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.121.1"><img alt="image" src="images/p245-02.jpg" xmlns="http://www.w3.org/1999/xhtml"></img></span></span></div>
<div class="image2" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.122.1"><img width="100%" alt="image" src="images/line2.jpg" xmlns="http://www.w3.org/1999/xhtml"></img></span></span></div>
<div id="c15-9" class="head" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.123.1">Testing the Library</span></span></div>
<div class="noindent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.124.1">To test the library, you can just run the example sketch that uses the library. </span><span class="koboSpan" id="kobo.124.2">Unless you are very lucky (or careful), the library will not work the first time you compile it, so read the error messages that appear in the information area at the bottom of the Arduino IDE.</span></span></div>
<div class="image2" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.125.1"><img width="100%" alt="image" src="images/line2.jpg" xmlns="http://www.w3.org/1999/xhtml"></img></span></span></div>
<div id="c15-10" class="head" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.126.1">Releasing the Library</span></span></div>
<div class="noindent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.127.1">Having created a library, you need to release it to the community. </span><span class="koboSpan" id="kobo.127.2">Perhaps the best way to make sure that people find it is to create an entry on the publicly editable wiki at </span><a href="http://playground.arduino.cc//Main/LibraryList"><span class="koboSpan" id="kobo.128.1">http://playground.arduino.cc//Main/LibraryList</span></a><span class="koboSpan" id="kobo.129.1">. </span><span class="koboSpan" id="kobo.129.2">You can also host the zip file here, although some people prefer to host the library on GitHub, Google Code, or some other hosting platform, and then they just place a link to the code on the wiki.</span></span></div>
<div class="indent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.130.1">If you want to upload your library to the Arduino Playground, follow these steps:</span></span></div>
<div class="numlist" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.131.1">1.  Test the library to make sure it works as expected.</span></span></div>
<div class="numlist" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.132.1">2.  Create a zip file of the library folder and give it the same name as the library class with an extension of .zip.</span></span></div>
<div class="numlist" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.133.1">3.  Register yourself as a user on </span><a href="http://www.arduino.cc"><span class="koboSpan" id="kobo.134.1">www.arduino.cc</span></a><span class="koboSpan" id="kobo.135.1">.</span></span></div>
<div class="numlist" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.136.1">4.  Add an entry on the Arduino Playground wiki—</span><a href="http://playground.arduino.cc//Main/LibraryList"><span class="koboSpan" id="kobo.137.1">http://playground.arduino.cc//Main/LibraryList</span></a><span class="koboSpan" id="kobo.138.1">—that describes the library and explains how to use it. </span><span class="koboSpan" id="kobo.138.2">The easiest way to do this is look at an entry for another library and copy the appropriate bit of wiki markup. </span><span class="koboSpan" id="kobo.138.3">Create a link using, for example, </span><b><span class="koboSpan" id="kobo.139.1">[[TEA5767Radio]]</span></b><span class="koboSpan" id="kobo.140.1"> to set a placeholder for a new page that will appear on the library list with a “?” </span><span class="koboSpan" id="kobo.140.2">next to it. </span><span class="koboSpan" id="kobo.140.3">Clicking the link will create the new page and open the wiki editor. </span><span class="koboSpan" id="kobo.140.4">Copy and adapt the wiki code from another library (perhaps from “TEA5767Radio”).</span></span></div>
<div class="numlist" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.141.1">5.  To upload the zip file of the library, you need to include a tab like this in the wiki markup: </span><b><span class="koboSpan" id="kobo.142.1">Attach:TEA5767Radio.zip</span></b><span class="koboSpan" id="kobo.143.1">. </span><span class="koboSpan" id="kobo.143.2">After the page has been saved, clicking the download link allows you to specify a zip file to upload onto the wiki server.</span></span></div>
<div class="image2" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.144.1"><img width="100%" alt="image" src="images/line2.jpg" xmlns="http://www.w3.org/1999/xhtml"></img></span></span></div>
<div id="c15-11" class="head" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.145.1">Summary</span></span></div>
<div class="noindent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.146.1">Creating a library can be very rewarding. </span><span class="koboSpan" id="kobo.146.2">Before creating one, however, always search in case someone else has already created the library for you.</span></span></div>
<div class="indent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.147.1">The nature of a book like this is that, inevitably, it cannot cover everything that the reader wants to know. </span><span class="koboSpan" id="kobo.147.2">But I do hope it has helped you with some of the more common advanced Arduino programming topics.</span></span></div>
<div class="indent" xmlns="http://www.w3.org/1999/xhtml"><span><span class="koboSpan" id="kobo.148.1">You can follow me on Twitter as @simonmonk2, and you will find more information about this book and my other books on my website at </span><a href="http://www.simonmonk.org"><span class="koboSpan" id="kobo.149.1">www.simonmonk.org</span></a><span class="koboSpan" id="kobo.150.1">.</span></span></div>
</div></div></body>
</html>